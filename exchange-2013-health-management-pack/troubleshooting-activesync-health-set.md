---
title: Устранение неполадок набора работоспособности ActiveSync
TOCTitle: Устранение неполадок набора работоспособности ActiveSync
ms:assetid: 8a0b8b26-b4ef-41b8-8f71-8271c1735a69
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/ms.exch.scom.activesync(v=EXCHG.150)
ms:contentKeyID: 53275662
ms.date: 11/14/2015
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Устранение неполадок набора работоспособности ActiveSync

 

_**Применимо к:**Exchange Server 2013_

_**Последнее изменение раздела:**2015-03-09_

Набор работоспособности Exchange ActiveSync отслеживает общую работоспособность службы ActiveSync для мобильных клиентов в организации. Набор работоспособности ActiveSync тесно связан со следующими наборами работоспособности:

[Устранение неполадок в наборе для контроля работоспособности ActiveSync.Protocol](troubleshooting-activesync-protocol-health-set.md)

[Устранение неполадок в наборе для контроля работоспособности ActiveSync.Proxy](troubleshooting-activesync-proxy-health-set.md)

Предупреждение о неисправности набора работоспособности ActiveSync указывает на проблему, которая может препятствовать доступу пользователей к почтовым ящикам с помощью ActiveSync.

## Пояснение

Служба ActiveSync отслеживается с помощью следующих зондов и мониторов.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Зонд</th>
<th>Настройки работоспособности</th>
<th>Зависимости</th>
<th>Связанные мониторы</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>ActiveSyncCTPProbe</p></td>
<td><p>ActiveSync</p></td>
<td><p>Active Directory</p>
<p>Проверка подлинности</p>
<p>Проверка подлинности сервера почтовых ящиков</p>
<p>Банк данных</p>
<p>Высокая доступность</p>
<p>Сеть</p></td>
<td><p>ActiveSyncCTPMonitor (набор работоспособности ActiveSync)</p></td>
</tr>
<tr class="even">
<td><p>ActiveSyncProxyTestProbe</p></td>
<td><p>ActiveSync.Proxy</p></td>
<td><p>-</p></td>
<td><p>ActiveSyncProxyTestMonitor (набор работоспособности ActiveSync.Proxy)</p></td>
</tr>
<tr class="odd">
<td><p>ActiveSyncDeepTestProbe</p></td>
<td><p>ActiveSync.Protocol</p></td>
<td><p>Active Directory</p>
<p>Проверка подлинности</p>
<p>Банк данных</p>
<p>Высокая доступность</p></td>
<td><p>ActiveSyncDeepTestMonitor (набор работоспособности ActiveSync)</p></td>
</tr>
<tr class="even">
<td><p>ActiveSyncSelfTestProbe</p></td>
<td><p>ActiveSync.Protocol</p></td>
<td><p>Active Directory</p>
<p>Проверка подлинности</p></td>
<td><p>ActiveSyncSelfTestMonitor (набор работоспособности ActiveSync.Protocol)</p>
<p>RequestsQueuedGt500Monitor (набор работоспособности ActiveSync)</p></td>
</tr>
</tbody>
</table>


Дополнительные сведения о зондах и мониторах см. в разделе [Работоспособность и производительность сервера](https://technet.microsoft.com/ru-ru/library/jj150551\(v=exchg.150\)).

## Действия пользователя

Служба может восстановить работу после отображения оповещения. Поэтому при получении предупреждения о неисправности набора работоспособности ActiveSync убедитесь, что проблема еще существует. Если проблема не устранена, выполните соответствующие действия по восстановлению, указанные в приведенных ниже разделах.

## Проверка проблемы

1.  Определите имя набора для контроля работоспособности и имя сервера, указанные в оповещении.

2.  В сообщении приводятся подробные сведения о точной причине возникновения оповещения. В большинстве случаев в сообщении представлена достаточная диагностическая информация для определения основной причины. Если в сообщении приводятся непонятные сведения:
    
    1.  откройте Командная консоль Exchange, а затем запустите следующую команду, чтобы получить сведения о настройках работоспособности, которые выдали предупреждение:
        
            Get-ServerHealth <server name> | ?{$_.HealthSetName -eq "<health set name>"}
        
        Например, чтобы получить данные набора работоспособности ActiveSync о сервере server1.contoso.com, выполните следующую команду:
        
            Get-ServerHealth server1.contoso.com | ?{$_.HealthSetName -eq "ActiveSync"}
    
    2.  Просмотрите выходные данные команды, чтобы определить монитор, сообщивший об ошибке. У монитора, который отправил предупреждение, параметр **AlertValue** будет иметь значение **Неисправность**.
    
    3.  Еще раз запустите зонд для средства мониторинга, которое находится в неисправном состоянии. Обратитесь к таблице в разделе Пояснение, чтобы найти связанный зонд. Для этого выполните следующую команду.
        
            Invoke-MonitoringProbe <health set name>\<probe name> -Server <server name> | Format-List
        
        Например, предположим, что неисправен монитор **ActiveSyncCTPMonitor**. С этим монитором связан зонд **ActiveSyncCTPProbe**. Чтобы запустить этот зонд на сервере server1.contoso.com, выполните следующую команду:
        
            Invoke-MonitoringProbe ActiveSync\ActiveSyncCTPProbe -Server server1.contoso.com | Format-List
    
    4.  В результатах выполнения команды просмотрите раздел «Результат» зонда. Если этот параметр имеет значение **Succeeded**, ошибка была временной и в настоящее время устранена. В противном случае обратитесь к действиям по восстановлению, приведенным в следующих разделах.

## Действия по восстановлению ActiveSyncDeepTestMonitor и ActiveSyncSelfTestMonitor

Это оповещение обычно возникает на серверах почтовых ящиков. Выполните следующие действия по восстановлению.

1.  Запустите диспетчер IIS, а затем подключитесь к серверу, который сообщает о неполадке. Щелкните **Пулы приложений** и перезапустите пул приложений ActiveSync с именем **MSExchangeSyncAppPool**.

2.  Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

3.  Если проблема не устранена, перезапустите все службы IIS с помощью служебной программы IISReset.

4.  Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

5.  Если проблема не устранена, перезапустите сервер. Для этого сначала переключите на резервный ресурс базы данных, размещенные на сервере, с помощью следующей команды:
    
        Set-MailboxServer server1.contoso.com -DatabaseCopyActivationDisabledAndMoveNow $true
    
    В этом и всех последующих примерах кодов замените*server1.contoso.com* на реальное имя сервера.

6.  Убедитесь, что все базы данных перемещены с сервера, который сообщил о проблеме. Для этого выполните следующую команду.
    
        Get-MailboxDatabaseCopyStatus -Server server1.contoso.com | Group Status

7.  Если результаты выполнения команды на шаге 6 показывают, что на сервере нет активных копий, перезапустите сервер. Если результаты выполнения команды показывают наличие активных копий, выполните действия 5 и 6 еще раз.

8.  После перезапуска сервера повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

9.  Если с зондом все нормально, выполните отработку отказа баз данных с помощью следующей команды:
    
        Set-MailboxServer server1.contoso.com -DatabaseCopyActivationDisabledAndMoveNow $false

10. Если выполнение зонда завершается сбоем, вам может понадобиться дополнительная помощь для устранения этой проблемы. Для решения этой проблемы обратитесь к специалисту службы технической поддержки Майкрософт. Сделать это можно в [Центре решений Exchange Server](http://go.microsoft.com/fwlink/p/?linkid=180809). В области навигации выберите элемент **Варианты поддержки и ресурсы** и выберите один из вариантов в разделе **Получите техническую поддержку**, чтобы обратиться к соответствующему специалисту. Так прямое обращение в службу технической поддержки Майкрософт в вашей организации может регламентироваться, сначала ознакомьтесь с инструкциями организации.

## Действия по восстановлению ActiveSyncCTPMonitor

Это оповещение обычно возникает на серверах клиентского доступа (CAS).

1.  Запустите диспетчер IIS, а затем подключитесь к серверу, который сообщает о неполадке. Щелкните **Пулы приложений** и перезапустите пул приложений ActiveSync с именем **MSExchangeSyncAppPool**.

2.  Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

3.  Если проблема не устранена, перезапустите все службы IIS с помощью служебной программы IISReset.

4.  Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

5.  Если проблема не устранена, проверьте состояние работоспособности соответствующего сервера почтовых ящиков. Имя сервера почтовых ящиков указывается значением `_Mbx:` в сообщении об ошибке.
    
    1.  Выполните следующую команду для соответствующего сервера почтовых ящиков. Например, следующая команда выполняется для сервера почтовых ящиков с именем mailbox1.contoso.com:
        
            Get-ServerHealth mailbox1.contoso.com | ?{$_.HealtSetName -like "ActiveSync*"}
    
    2.  Если о неисправности сообщают мониторы, указанные в результатах выполнения команды, то на них следует обратить внимание в первую очередь. Выполните действия по устранению неполадок, описанные в разделе Действия по восстановлению ActiveSyncDeepTestMonitor и ActiveSyncSelfTestMonitor.

6.  Если все мониторы на сервере почтовых ящиков исправны, перезапустите сервер клиентского доступа.

7.  После перезапуска сервера повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка проблемы.

8.  Если выполнение зонда завершается сбоем, вам может понадобиться дополнительная помощь для устранения этой проблемы. Для решения этой проблемы обратитесь к специалисту службы технической поддержки Майкрософт. Сделать это можно в [Центре решений Exchange Server](http://go.microsoft.com/fwlink/p/?linkid=180809). В области навигации выберите элемент **Варианты поддержки и ресурсы** и выберите один из вариантов в разделе **Получите техническую поддержку**, чтобы обратиться к соответствующему специалисту. Так прямое обращение в службу технической поддержки Майкрософт в вашей организации может регламентироваться, сначала ознакомьтесь с инструкциями организации.

## Действия по восстановлению RequestsQueuedGt500Monitor

Это предупреждение монитора обычно относится к серверам клиентского доступа.

1.  Запустите диспетчер IIS, а затем подключитесь к серверу, который сообщает о неполадке. Щелкните **Пулы приложений** и перезапустите пул приложений ActiveSync с именем **MSExchangeSyncAppPool**.

2.  Подождите 10 минут, чтобы убедиться в исправности монитора. Через 10 минут выполните следующую команду для соответствующего сервера. Например, для сервера server1.contoso.com выполняется следующая команда:
    
        Get-ServerHealth server1.contoso.com | ?{$_.HealthSetName -like "ActiveSync*"}

3.  Если проблема не устранена, полностью перезапустите службы IIS командой IISReset.

4.  Подождите 10 минут и снова выполните команду, показанную на шаге 2, чтобы убедиться в исправности монитора.

5.  Если проблема не устранена, перезапустите сервер. Если это сервер CAS, просто перезагрузите его. Если это сервер почтовых ящиков, выполните следующие действия.
    
    1.  Переключите на резервный ресурс базы данных, размещенные на сервере. Для этого выполните следующую команду.
        
            Set-MailboxServer server1.contoso.com -DatabaseCopyActivationDisabledAndMoveNow $true
        
        **Примечание**. В этом и всех последующих примерах кодов замените *server1.contoso.com* на действительное имя сервера.
    
    2.  Убедитесь, что все базы данных перемещены с сервера, который сообщает о проблеме. Для этого выполните следующую команду.
        
            Get-MailboxDatabaseCopyStatus -Server server1.contoso.com | Group Status
        
        Если в выходных данных команды не отображаются активные копии на сервере, перезапустите сервер.

6.  Через 10 минут после перезапуска сервера снова выполните команду, показанную на шаге 2, чтобы убедиться в исправности монитора.

7.  Если монитор исправен и если это сервер почтовых ящиков, переключите базы данных с помощью следующей команды:
    
        Set-MailboxServer server1.contoso.com -DatabaseCopyActivationDisabledAndMoveNow $false

8.  Если выполнение зонда завершается сбоем, вам может понадобиться дополнительная помощь для устранения этой проблемы. Для решения этой проблемы обратитесь к специалисту службы технической поддержки Майкрософт. Сделать это можно в [Центре решений Exchange Server](http://go.microsoft.com/fwlink/p/?linkid=180809). В области навигации выберите элемент **Варианты поддержки и ресурсы** и выберите один из вариантов в разделе **Получите техническую поддержку**, чтобы обратиться к соответствующему специалисту. Так прямое обращение в службу технической поддержки Майкрософт в вашей организации может регламентироваться, сначала ознакомьтесь с инструкциями организации.

## Дополнительные сведения

[Служба Exchange ActiveSync](https://technet.microsoft.com/ru-ru/library/aa998357\(v=exchg.150\))

[Мобильные устройства](https://technet.microsoft.com/ru-ru/library/bb232129\(v=exchg.150\))

[Задачи управления виртуальным каталогом Exchange ActiveSync](https://technet.microsoft.com/ru-ru/library/bb125170\(v=exchg.150\))

