---
title: Устранение неполадок, связанных с настройками работоспособности Autodiscover.Protocol
TOCTitle: Устранение неполадок, связанных с настройками работоспособности Autodiscover.Protocol
ms:assetid: 06afdcc8-7920-4e88-b85a-98e67a19d221
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/ms.exch.scom.autodiscover.protocol(v=EXCHG.150)
ms:contentKeyID: 53275648
ms.date: 11/14/2015
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Устранение неполадок, связанных с настройками работоспособности Autodiscover.Protocol

 

_**Применимо к:**Exchange Server 2013_

_**Последнее изменение раздела:**2015-03-09_

Настройки работоспособности Autodiscover.Protocol отвечают за мониторинг протокола связи автообнаружения на сервере почтовых ящиков.

Если вы получите оповещение о неработоспособном состоянии настроек работоспособности Autodiscover.Protocol, это указывает на проблему, вследствие которой пользователи не могут получить доступ к своим почтовым ящикам.

## Пояснение

За мониторинг службы Autodiscover.Protocol отвечают приведенные ниже зонды и мониторы.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Зонд</th>
<th>Настройки работоспособности</th>
<th>Зависимости</th>
<th>Связанные мониторы</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>AutodiscoverSelfTestProbe</p></td>
<td><p>Autodiscover.Protocol</p></td>
<td><p>Active Directory</p></td>
<td><p>AutodiscoverSelfTestMonitor</p></td>
</tr>
</tbody>
</table>


Дополнительные сведения о зондах и мониторах см. в разделе [Работоспособность и производительность сервера](https://technet.microsoft.com/ru-ru/library/jj150551\(v=exchg.150\)).

## Распространенные проблемы

Этот зонд может не работать по любой из следующих распространенных причин:

  - Не отвечает пул приложений автообнаружения (MSExchangeAutodiscoverAppPool), размещенный на наблюдаемом сервере клиентского доступа (CAS), либо не отвечает пул приложений автообнаружения, размещенный на одном или нескольких серверах почтовых ящиков.

  - Контроллеры доменов не отвечают.

## Действия пользователя

Служба может восстановить работу после отображения оповещения. Поэтому если вы получите оповещение о неработоспособном состоянии настроек работоспособности, сначала убедитесь в наличии данной проблемы. Если проблема не устранена, выполните соответствующие действия по восстановлению, указанные в приведенных ниже разделах.

## Проверка наличия проблемы

1.  Определите имена настроек работоспособности и сервера, указанные в оповещении.

2.  В сообщении приводятся подробные сведения о точной причине возникновения оповещения. В большинстве случаев в сообщении приводится достаточно сведений по устранению неполадок для определения основной причины проблемы. Если в сообщении приводятся непонятные сведения:
    
    1.  Откройте Командная консоль Exchange, а затем выполните следующую команду, чтобы извлечь подробные сведения о настройках работоспособности, с которыми связано оповещение.
        
            Get-ServerHealth <server name> | ?{$_.HealthSetName -eq "<health set name>"}
        
        Например, чтобы извлечь подробные сведения о настройках работоспособности Autodiscover.Protocol относительно сервера server1.contoso.com, выполните следующую команду.
        
            Get-ServerHealth server1.contoso.com | ?{$_.HealthSetName -eq "Autodiscover.Protocol"}
    
    2.  Просмотрите выходные данные команды, чтобы определить монитор, сообщивший об ошибке. Параметр **AlertValue** монитора, вызвавшего оповещение, будет иметь значение `Unhealthy`.
    
    3.  Еще раз запустите зонд для средства мониторинга, которое находится в неисправном состоянии. Обратитесь к таблице в разделе Пояснение, чтобы найти связанный зонд. Для этого выполните следующую команду.
        
            Invoke-MonitoringProbe <health set name>\<probe name> -Server <server name> | Format-List
        
        Например, предположим, что не работает монитор **AutodiscoverSelfTestMonitor**. С этим монитором связан зонд **AutodiscoverSelfTestProbe**. Чтобы запустить этот зонд на сервере server1.contoso.com, выполните следующую команду.
        
            Invoke-MonitoringProbe Autodiscover.Protocol\AutodiscoverSelfTestProbe -Server server1.contoso.com | Format-List
    
    4.  В выходных данных команды просмотрите значение параметра **Результат** зонда. Если этот параметр имеет значение **Succeeded**, ошибка была временной и в настоящее время устранена. В противном случае обратитесь к действиям по восстановлению, приведенным в следующих разделах.

## Действия по восстановлению зонда AutodiscoverSelfTestProbe

Если вы получите оповещение, связанное с настройками работоспособности, сообщение электронной почты содержит приведенные ниже сведения.

  - Имя сервера почтовых ящиков, отправившего оповещение.

  - Имя наблюдаемого сервера почтовых ящиков.

  - Время и дата возникновения оповещения.

  - Используемый механизм проверки подлинности и сведения об учетных данных.

  - Полная трассировка исключения, связанного с последней ошибкой, включая диагностические данные и конкретные сведения о заголовке HTTP.

Сведения в полной трассировке исключения можно использовать для устранения проблемы. Исключение, создаваемое зондом, содержит поле "Причина сбоя" с описанием причины сбоя.

Для устранения данной проблемы выполните действия, указанные ниже.

1.  Просмотрите журналы протокола на серверах почтовых ящиков. По умолчанию файлы журналов протокола на сервере почтовых ящиков расположены в папке ***\<каталог установки Exchange Server\>*\\Logging\\Autodiscover**.

2.  Создайте тестовую учетную запись пользователя, а затем войдите с соответствующего адреса на сервер почтовых ящиков. Например, войдите в систему со следующего адреса: https://*\<имя сервера\>*:444/autodiscover/autodiscover.xml.
    
    Если имя тестовой учетной записи будет принято, возможно, проблема с сервером почтовых ящиков, на котором размещен наблюдаемый почтовый ящик.

3.  Повторите предыдущие действия, используя тестовую учетную запись для входа на сервер почтовых ящиков.

4.  Проверьте наличие оповещений, которые связаны с настройками работоспособности Autodiscover.Proxy и могут указывать на проблему с определенным сервером почтовых ящиков. Подробнее см. в разделе [Устранение неполадок, связанных с наборами средств для проверки работоспособности Autodiscover.Proxy](troubleshooting-autodiscover-proxy-health-set.md).

5.  Проверьте наличие оповещений, которые связаны с настройками работоспособности автообнаружения и могут указывать на проблему с определенными серверами почтовых ящиков. Подробнее см. в разделе [Устранение неполадок с настройками работоспособности автообнаружения](troubleshooting-autodiscover-health-set.md).

6.  Запустите диспетчер IIS и подключитесь к серверу почтовых ящиков, который сообщает об ошибке. Убедитесь, что пул приложений **MSExchangeAutodiscoverAppPool** запущен на сервере почтовых ящиков.

7.  В диспетчере IIS щелкните **Пулы приложений**, а затем перезапустите пул приложений **MSExchangeAutodiscoverAppPool**, выполнив следующую команду из командной консоли:
    
        %SystemRoot%\System32\inetsrv\Appcmd recycle MSExchangeAutodiscoverAppPool

8.  Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка наличия проблемы.

9.  Если проблема не устранена, перезапустите службы IIS с помощью служебной программы IISReset или следующей команды:
    
        Iisreset /noforce

10. Повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка наличия проблемы.

11. Если проблема не устранена, перезапустите сервер.

12. После перезапуска сервера повторно запустите связанный зонд, как показано в шаге 2c раздела Проверка наличия проблемы.

13. Если зонд все еще не работает, вам понадобится помощь для устранения данной проблемы. Для решения этой проблемы обратитесь к специалисту службы технической поддержки Майкрософт. Сделать это можно в [Центре решений Exchange Server](http://go.microsoft.com/fwlink/p/?linkid=180809). В области навигации выберите элемент **Варианты поддержки и ресурсы** и выберите один из вариантов в разделе **Получите техническую поддержку**, чтобы обратиться к соответствующему специалисту. Так прямое обращение в службу технической поддержки Майкрософт в вашей организации может регламентироваться, сначала ознакомьтесь с инструкциями организации.

## Дополнительные сведения

[Новые возможности в Exchange 2013](https://technet.microsoft.com/ru-ru/library/jj150540\(v=exchg.150\))

[Командлеты Exchange 2013](https://technet.microsoft.com/ru-ru/library/bb124413\(v=exchg.150\))

