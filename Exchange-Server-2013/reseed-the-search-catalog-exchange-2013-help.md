---
title: 'Повторное заполнение каталога поиска: Exchange 2013 Help'
TOCTitle: Повторное заполнение каталога поиска
ms:assetid: 9d873bd4-0422-4975-b5e2-82a347479115
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Ee633475(v=EXCHG.150)
ms:contentKeyID: 52061247
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Повторное заполнение каталога поиска

 

_**Применимо к:** Exchange Server 2013_

_**Последнее изменение раздела:** 2015-03-09_

Если каталог индексов содержимого для копии базы данных почтовых ящиков поврежден, может потребоваться повторное заполнение каталога. Поврежденные индексы содержимого указываются в журнале событий приложений следующим событием.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Код события</th>
<th>Уровень</th>
<th>Источник</th>
<th>Сведения</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>123</p></td>
<td><p>Ошибка</p></td>
<td><p>ExchangeStoreDB</p></td>
<td><p>В &lt;<em>timestamp</em>&gt; в копии &lt;<em>identity</em>&gt; базы данных банка данных Microsoft Exchange на этом сервере произошло повреждение каталога поиска. Просмотрите журнал событий на сервере для других &quot;ExchangeStoreDb&quot; и &quot;Индексатор поиска MSExchange&quot; события для более конкретной информации о сбое. Повторное заполнение каталога рекомендуется через &quot;Update-MailboxDatabaseCopy&quot; задача.</p></td>
</tr>
</tbody>
</table>


Если копия базы данных почтовых ящиков расположена на сервере, который является частью группы обеспечения доступности баз данных, вы можете повторно заполнить каталог индексов контента от другого члена этой группы.

Если копия базы данных почтовых ящиков одна, необходимо вручную создать новый каталог индексов контента.

Сведения о других задачах управления, связанных со службой поиска Exchange, см. в разделе [Процедуры поиска в службе Exchange](exchange-search-procedures-exchange-2013-help.md).

## Что нужно знать перед началом работы

  - Предполагаемое время для завершения: 2 мин. Фактическое время повторного заполнения зависит от размера каталога индексов содержимого.

  - Для выполнения этих процедур необходимы соответствующие разрешения. Сведения о необходимых разрешениях см. в статье Подраздел «Служба поиска Exchange» в разделе [Разрешения получателей](recipients-permissions-exchange-2013-help.md).

  - Сочетания клавиш для процедур, описанных в этой статье, приведены в статье [Сочетания клавиш в Центре администрирования Exchange](keyboard-shortcuts-in-the-exchange-admin-center-exchange-online-protection-help.md).

Возникли проблемы? Обратитесь за помощью к участникам форумов, посвященных Exchange. Посетите форумы по таким продуктам: [Exchange Server](https://go.microsoft.com/fwlink/p/?linkid=60612), [Exchange Online](https://go.microsoft.com/fwlink/p/?linkid=267542) или [Exchange Online Protection](https://go.microsoft.com/fwlink/p/?linkid=285351).

## Повторное заполнение каталога индексов контента, если база данных почтовых ящиков является частью группы обеспечения доступности баз данных

Если база данных почтовых ящиков расположена на сервере, который является частью группы обеспечения доступности баз данных, воспользуйтесь одной из приведенных ниже процедур.

## Повторное заполнение каталога индексов содержимого из любого источника

В этом примере выполняется повторное заполнение каталога индексов контента для копии базы данных DB1 на сервере почтовых ящиков MBX1 с любого исходного сервера из группы обеспечения доступности баз данных, на котором имеется копия этой базы данных.

    Update-MailboxDatabaseCopy -Identity DB1\MBX1 -CatalogOnly

Подробные сведения о синтаксисе и параметрах см. в разделе [Update-MailboxDatabaseCopy](https://technet.microsoft.com/ru-ru/library/dd335201\(v=exchg.150\)).

## Повторное заполнение каталога индексов содержимого из определенного источника

В данном примере выполняется повторное заполнение каталога индексов содержимого для копии базы данных DB1 на сервере почтовых ящиков MBX1 с сервера MBX2, на котором также имеется копия этой базы данных.

    Update-MailboxDatabaseCopy -Identity DB1\MBX1 -SourceServer MBX2 -CatalogOnly

Подробные сведения о синтаксисе и параметрах см. в разделе [Update-MailboxDatabaseCopy](https://technet.microsoft.com/ru-ru/library/dd335201\(v=exchg.150\)).

## Повторное заполнение каталога индексов контента при наличии всего одной копии базы данных почтовых ящиков

При наличии всего одной копии базы данных почтовых ящиков необходимо вручную повторно заполнить каталог поиска, создав каталог индексов контента.

1.  Чтобы остановить службу поиска Microsoft Exchange и службу контроллера узлов поиска Microsoft Exchange, выполните приведенные ниже команды.
    
    ```
    Stop-Service MSExchangeFastSearch
    ```
    ```
    Stop-Service HostControllerService
    ```

2.  Удалите, переместите или переименуйте папку, которая содержит каталог индексов контента Exchange. Она называется `%ExchangeInstallPath\Mailbox\<name of mailbox database>_Catalog\<GUID>12.1.Single`. Например, можно переименовать папку `C:\Program Files\Microsoft\Exchange Server\V15\Mailbox\Mailbox Database 0657134726_Catalog\F0627A72-9F1D-494A-839A-D7C915C279DB12.1.Single_OLD`.
    
    > [!NOTE]  
    > Удалив эту папку, вы освободите дополнительное место на диске. Можно также переименовать или переместить ее, чтобы сохранить в целях устранения неполадок.


3.  Чтобы перезапустить службу поиска Microsoft Exchange и службу контроллера узлов поиска Microsoft Exchange, выполните приведенные ниже команды.
    
    ```
    Start-Service MSExchangeFastSearch
    ```
    ```
    Start-Service HostControllerService
    ```
    
    После их перезапуска служба поиска Exchange перестроит каталог индексов контента.

## Как проверить, что все получилось?

Повторное заполнение каталога индексов контента службой поиска Exchange может занять некоторое время. Чтобы отобразить состояние процесса повторного заполнения, выполните приведенную ниже команду.

  ```
  Get-MailboxDatabaseCopyStatus | FL Name,*Index*
  ```

Во время повторного заполнения каталога поиска свойство *ContentIndexState* имеет значение **Идет обход**. После завершения повторного заполнения значение меняется на **Работоспособно**.

