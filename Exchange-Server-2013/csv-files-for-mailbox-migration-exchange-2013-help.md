---
title: 'CSV-файлы для переноса почтовых ящиков: Exchange 2013 Help'
TOCTitle: CSV-файлы для переноса почтовых ящиков
ms:assetid: e67b3455-3946-4335-b80c-97823c76ac54
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Dn170437(v=EXCHG.150)
ms:contentKeyID: 54652102
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# CSV-файлы для переноса почтовых ящиков

 

_**Применимо к:** Exchange Online, Exchange Server 2013_

_**Последнее изменение раздела:** 2017-11-16_

Для пакетной миграции большого количества почтовых ящиков пользователей можно использовать CSV-файл. Вы можете указать этот файл, когда будете создавать пакет миграции с помощью Центра администрирования Exchange или командлета **New-MigrationBatch** в командной консоли Exchange. Вы можете указать нескольких пользователей, которых необходимо перенести в пакете миграции, с помощью CSV-файла в указанных ниже сценариях.

  - **Перемещение в локальные организации Exchange**
    
      - **Локальное перемещение:**  при локальном перемещении почтовые ящики перемещаются из одной базы данных почтовых ящиков в другую. Локальное перемещение происходит в пределах одного леса.
    
      - **Перемещение между лесами предприятия:**  при перемещении между лесами предприятия почтовые ящики перемещаются в другой лес. Перемещения между лесами инициируются из целевого леса (леса, в который необходимо переместить почтовые ящики) или из исходного леса (леса, в котором в настоящее время размещены почтовые ящики).

  - **Входящая и исходящая миграция Exchange Online**
    
      - **Входящая удаленная миграция:**  при гибридном развертывании Exchange почтовые ящики можно переместить из локальной организации Exchange в Exchange Online. Этот процесс также называется *входящей* удаленной миграцией, поскольку почтовые ящики перемещаются в Exchange Online.
    
      - **Исходящая удаленная миграция:**  также можно выполнить *исходящую* удаленную миграцию, при которой почтовые ящики Exchange Online переносятся в локальную организацию Exchange.
        
        <table>
        <thead>
        <tr class="header">
        <th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
        </tr>
        </thead>
        <tbody>
        <tr class="odd">
        <td>Входящая и исходящая удаленная миграция инициируются из организации Exchange Online.</td>
        </tr>
        </tbody>
        </table>
    
      - **Поэтапная миграция Exchange:**  также возможна миграция подмножества почтовых ящиков из локальной организации Exchange в Exchange Online. Это еще один тип входящей миграции. Только почтовые ящики Exchange 2003 и Exchange 2007 могут мигрировать при поэтапной миграции Exchange. Поэтапная миграция почтовых ящиков Exchange 2010 и Exchange 2013 не поддерживается. Перед запуском поэтапной миграции необходимо подготовить пользователей почты к работе в организации Exchange Online, используя синхронизацию каталогов или другой метод.
    
      - **Миграция IMAP:**  это тип входящей миграции, при которой данные почтового ящика перемещаются с сервера IMAP (в том числе Exchange) в Exchange Online. Перед осуществлением миграции IMAP необходимо подготовить почтовые ящики к работе в Exchange Online, прежде чем переносить данные почтовых ящиков.

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>При прямой миграции Exchange не поддерживается использование CSV-файла, так как все локальные почтовые ящики пользователей переносятся в Exchange Online в одном пакете.</td>
</tr>
</tbody>
</table>


## Поддерживаемые атрибуты CSV-файлов при групповых перемещениях или миграциях

В первой строке, т. е. в строке заголовков CSV-файла, используемого для переноса пользователей, содержатся имена атрибутов или полей, значения которых находятся в последующих строках. Имя каждого атрибута отделяется запятой. Каждая последующая строка после строки заголовков представляет отдельного пользователя и содержит сведения, необходимые для миграции. Атрибуты в строке должны следовать в том же порядке, что и имена атрибутов в строке заголовков. Значение каждого атрибута отделяется запятой. Если для какой-либо записи значение атрибута отсутствует, для этого атрибута не следует вводить никаких знаков. Однако необходимо убедиться в том, что пустое значение отделено запятой от следующего атрибута.

Значения атрибутов в CSV-файле переопределяют значения соответствующих параметров, заданных при создании пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange. Дополнительные сведения и примеры см. в разделе Переопределение значений для пакета миграции значениями атрибутов в CSV-файле.

<table>
<thead>
<tr class="header">
<th><img src="images/Bb124558.tip(EXCHG.150).gif" title="Совет" alt="Совет" />Совет.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Для создания CSV-файла можно использовать любой текстовый редактор, но использование приложения типа Microsoft Excel облегчит импорт данных, а также настройку и упорядочивание CSV-файлов. Обязательно сохраняйте CSV-файлы как CSV- или TXT-файлы.</td>
</tr>
</tbody>
</table>


В следующих разделах описываются атрибуты, поддерживаемые в строке заголовков CSV-файла для каждого типа миграции. Каждый раздел включает таблицу, в которой перечисляются все поддерживаемые атрибуты и их описания, указано, являются ли они обязательными, а также представлены примеры значений, используемых для атрибутов.

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>В следующих разделах под <em>исходной средой</em> подразумевается текущее расположение почтового ящика пользователя или базы данных. Под <em>целевой средой</em> подразумевается расположение или база данных, в которые будет перенесен почтовый ящик.</td>
</tr>
</tbody>
</table>


## Локальные перемещения

В следующей таблице приводятся описания атрибутов, поддерживаемых для CSV-файла при локальных перемещениях. Подробнее см. в разделе [Управление локальными перемещениями](manage-on-premises-moves-exchange-2013-help.md).


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Атрибут</th>
<th>Обязательный или дополнительный</th>
<th>Допустимые значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>EmailAddress</p></td>
<td><p>Обязательный</p></td>
<td><p>SMTP-адрес пользователя</p></td>
<td><p>Указывает перемещаемого пользователя.</p></td>
</tr>
<tr class="even">
<td><p>TargetDatabase</p></td>
<td><p>Необязательный</p></td>
<td><p>Имя базы данных</p></td>
<td><p>Указывает базу данных почтовых ящиков, в которую будет перемещен основной почтовый ящик пользователя. В разных строках CSV-файла можно указать разные базы данных, что позволит перемещать почтовые ящики в несколько баз данных в одном пакете миграции.</p></td>
</tr>
<tr class="odd">
<td><p>TargetArchiveDatabase</p></td>
<td><p>Необязательный</p></td>
<td><p>Имя базы данных</p></td>
<td><p>Указывает базу данных почтовых ящиков, в которую будет перемещен архивный почтовый ящик пользователя (если он существует). В разных строках CSV-файла можно указать разные базы данных, что позволит перемещать архивные почтовые ящики в несколько баз данных в одном пакете миграции.</p>
<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если архивная база данных не указана, архивный почтовый ящик перемещается в ту же базу данных, что и основной.</td>
</tr>
</tbody>
</table>

</td>
</tr>
<tr class="even">
<td><p>BadItemLimit</p></td>
<td><p>Необязательный</p></td>
<td><p><code>Unlimited</code> или неотрицательное целое число от <code>0</code> (значение по умолчанию) до максимального значения <code>2147483647</code></p></td>
<td><p>Указывает количество неправильных элементов, которые будут пропущены, если служба миграции обнаружит поврежденный элемент в почтовом ящике. Если включить этот атрибут в CSV-файл, он переопределит значение по умолчанию или значение, указанное вами с помощью параметра <em>BadItemLimit</em> во время создания пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange.</p>
<table>
<thead>
<tr class="header">
<th><img src="images/Bb124558.tip(EXCHG.150).gif" title="Совет" alt="Совет" />Совет.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Рекомендуется использовать значение по умолчанию 0 и увеличивать предельное количество неправильных элементов для определенного пользователя в случае сбоя перемещения или миграции для него.</td>
</tr>
</tbody>
</table>

<p></p></td>
</tr>
<tr class="odd">
<td><p>MailboxType</p></td>
<td><p>Необязательный</p></td>
<td><p>Используйте одно из следующих значений:</p>
<ul>
<li><p><code>PrimaryOnly</code></p></li>
<li><p><code>ArchiveOnly</code></p></li>
<li><p><code>PrimaryAndArchive</code> (значение по умолчанию)</p></li>
</ul></td>
<td><p>Указывает, какой почтовый ящик перемещается: основной, архивный или оба.</p></td>
</tr>
</tbody>
</table>


## Входящая удаленная миграция при гибридном развертывании

При гибридном развертывании вы можете переместить почтовые ящики из локальной организации Exchange в Exchange Online. При входящей миграции почтовых ящиков пакет миграции создается в организации Exchange Online и инициируется администратором Exchange Online. Подробнее см. в разделе [Перемещение почтовых ящиков между локальными организациями и организациями Exchange Online в случаях гибридного развертывания](https://technet.microsoft.com/ru-ru/library/jj906432\(v=exchg.150\)).

В следующей таблице приводятся описания атрибутов, поддерживаемых для CSV-файла при входящей удаленной миграции.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Атрибут</th>
<th>Обязательный или дополнительный</th>
<th>Допустимые значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>EmailAddress</p></td>
<td><p>Обязательный</p></td>
<td><p>SMTP-адрес пользователя</p></td>
<td><p>Указывает адрес электронной почты пользователя с включенной поддержкой почты в организации Exchange Online, которая соответствует переносимому локальному почтовому ящику пользователя.</p></td>
</tr>
<tr class="even">
<td><p>BadItemLimit</p></td>
<td><p>Необязательный</p></td>
<td><p><code>Unlimited</code> или неотрицательное целое число от <code>0</code> (значение по умолчанию) до максимального значения <code>2147483647</code></p></td>
<td><p>Указывает количество неправильных элементов, которые будут пропущены, если служба миграции обнаружит поврежденный элемент в почтовом ящике. Если включить этот атрибут в CSV-файл, он переопределит значение по умолчанию или значение, указанное вами с помощью параметра <em>BadItemLimit</em> во время создания пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange.</p>
<table>
<thead>
<tr class="header">
<th><img src="images/Bb124558.tip(EXCHG.150).gif" title="Совет" alt="Совет" />Совет.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Рекомендуется использовать значение по умолчанию 0 и увеличивать предельное количество неправильных элементов для определенного пользователя в случае сбоя перемещения или миграции для него.</td>
</tr>
</tbody>
</table>

</td>
</tr>
<tr class="odd">
<td><p>LargeItemLimit</p></td>
<td><p>Необязательный</p></td>
<td><p><code>Unlimited</code> или неотрицательное целое число от <code>0</code> (значение по умолчанию) до максимального значения.</p></td>
<td><p>Указывает количество крупных элементов в почтовом ящике пользователя, которые будут пропускаться. Если количество крупных элементов превышает заданное значение, миграция почтового ящика завершается с ошибкой.</p>
<p>По умолчанию установлено значение 0, вследствие чего в миграции произойдет сбой при обнаружении в почтовом ящике любых крупных элементов.</p>
<p>При входящей миграции почтовых ящиков в Exchange Online переносятся элементы размером до 35 МБ.</p></td>
</tr>
<tr class="even">
<td><p>MailboxType</p></td>
<td><p>Необязательный</p></td>
<td><p>Используйте одно из следующих значений:</p>
<ul>
<li><p><code>PrimaryOnly</code></p></li>
<li><p><code>ArchiveOnly</code></p></li>
<li><p><code>PrimaryAndArchive</code> (значение по умолчанию)</p></li>
</ul></td>
<td><p>Указывает, какой почтовый ящик перемещается: основной, архивный или оба.</p></td>
</tr>
</tbody>
</table>


## Перемещения между лесами предприятия и исходящая удаленная миграция при гибридном развертывании

Как указывалось ранее, перемещения между лесами инициируются из конечного или исходного леса. Исходящая удаленная миграция инициируется из организации Exchange Online. Дополнительные сведения см. в следующих разделах:

  - [Подготовка почтовых ящиков для запросов на перемещение между лесами](prepare-mailboxes-for-cross-forest-move-requests-exchange-2013-help.md)

  - [Перемещение почтовых ящиков между локальными организациями и организациями Exchange Online в случаях гибридного развертывания](https://technet.microsoft.com/ru-ru/library/jj906432\(v=exchg.150\))

В следующей таблице приводятся описания атрибутов, поддерживаемых для CSV-файла при перемещениях между лесами предприятия и исходящей удаленной миграции при гибридном развертывании Exchange.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Атрибут</th>
<th>Обязательный или дополнительный</th>
<th>Допустимые значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>EmailAddress</p></td>
<td><p>Обязательный</p></td>
<td><p>SMTP-адрес пользователя</p></td>
<td><p>При перемещениях между лесами предприятия данный атрибут указывает почтовый ящик или пользователя с включенной поддержкой почты в исходном лесу.</p>
<p>При исходящей удаленной миграции данный атрибут указывает почтовый ящик Exchange Online.</p></td>
</tr>
<tr class="even">
<td><p>TargetDatabase</p></td>
<td><p>Обязательный при исходящей удаленной миграции и перемещениях между лесами предприятия, которые инициируются из исходного леса. Этот атрибут также можно указать при создании пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange.</p>
<p>Этот атрибут является необязательным при перемещениях между лесами предприятия, которые инициируются из конечного леса.</p></td>
<td><p>Имя базы данных</p></td>
<td><p>Указывает базу данных почтовых ящиков в конечном лесу, в которую будет перемещен основной почтовый ящик пользователя. В разных строках CSV-файла можно указать разные базы данных, что позволит перемещать почтовые ящики в несколько баз данных в одном пакете миграции.</p></td>
</tr>
<tr class="odd">
<td><p>TargetArchiveDatabase</p></td>
<td><p>Необязательный</p></td>
<td><p>Имя базы данных</p></td>
<td><p>Указывает базу данных почтовых ящиков в конечном лесу, в которую будет перемещен архивный почтовый ящик пользователя. В разных строках CSV-файла можно указать разные базы данных, что позволит перемещать архивные почтовые ящики в несколько баз данных в одном пакете миграции.</p></td>
</tr>
<tr class="even">
<td><p>BadItemLimit</p></td>
<td><p>Необязательный</p></td>
<td><p><code>Unlimited</code> или неотрицательное целое число от <code>0</code> (значение по умолчанию) до максимального значения <code>2147483647</code></p></td>
<td><p>Указывает количество неправильных элементов, которые будут пропущены, если служба миграции обнаружит поврежденный элемент в почтовом ящике. Если включить этот атрибут в CSV-файл, он переопределит значение по умолчанию или значение, указанное вами с помощью параметра <em>BadItemLimit</em> во время создания пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange.</p>
<table>
<thead>
<tr class="header">
<th><img src="images/Bb124558.tip(EXCHG.150).gif" title="Совет" alt="Совет" />Совет.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Рекомендуется использовать значение по умолчанию 0 и увеличивать предельное количество неправильных элементов для определенного пользователя в случае сбоя перемещения или миграции для него.</td>
</tr>
</tbody>
</table>

</td>
</tr>
<tr class="odd">
<td><p>LargeItemLimit</p></td>
<td><p>Необязательный</p></td>
<td><p><code>Unlimited</code> или неотрицательное целое число от <code>0</code> (значение по умолчанию) до максимального значения.</p></td>
<td><p>Указывает количество крупных элементов в почтовом ящике пользователя, которые будут пропускаться. Если количество крупных элементов превышает заданное значение, миграция почтового ящика завершается с ошибкой.</p>
<p>По умолчанию установлено значение 0, вследствие чего в миграции произойдет сбой при обнаружении в почтовом ящике любых крупных элементов.</p>
<p>При входящей миграции почтовых ящиков в Exchange Online переносятся элементы размером до 35 МБ.</p></td>
</tr>
<tr class="even">
<td><p>MailboxType</p></td>
<td><p>Необязательный</p></td>
<td><p>Используйте одно из следующих значений:</p>
<ul>
<li><p><code>PrimaryOnly</code></p></li>
<li><p><code>ArchiveOnly</code></p></li>
<li><p><code>PrimaryAndArchive</code> (значение по умолчанию)</p></li>
</ul></td>
<td><p>Указывает, какой почтовый ящик перемещается: основной, архивный или оба.</p></td>
</tr>
</tbody>
</table>


## Поэтапная миграция Exchange

CSV-файл необходимо использовать для определения группы пользователей для пакета миграции, если для переноса локальных почтовых ящиков Exchange 2003 и Exchange 2007 в Exchange Online требуется использовать поэтапную миграцию Exchange. При использовании поэтапной миграции Exchange количество почтовых ящиков для переноса в облако не ограничено. Тем не менее, CSV-файл для пакета миграции может содержать не более 1000 строк. Чтобы перенести более 1000 почтовых ящиков, необходимо создать дополнительные CSV-файлы, а затем использовать каждый из них для создания нового пакета миграции. Дополнительные сведения о поэтапной миграции Exchange см. в разделе [Перенос почтовых ящиков в Exchange Online с помощью поэтапной миграции](https://technet.microsoft.com/ru-ru/library/jj874018\(v=exchg.150\)).

В следующей таблице приводятся описания атрибутов, поддерживаемых для CSV-файла при поэтапной миграции Exchange.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Атрибут</th>
<th>Обязательный или дополнительный</th>
<th>Допустимые значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>EmailAddress</p></td>
<td><p>Обязательный</p></td>
<td><p>SMTP-адрес пользователя</p></td>
<td><p>Указывает электронный адрес пользователя, поддерживающего почту (или почтового ящика, если выполняется повторная попытка миграции), в организации Exchange Online, которая соответствует переносимому локальному почтовому ящику пользователя. Пользователи, поддерживающие почту, создаются в Exchange Online в результате синхронизации службы каталогов или другого процесса подготовки. Электронный адрес пользователя, поддерживающего почту, должен совпадать со свойством <em>WindowsEmailAddress</em> соответствующего локального почтового ящика.</p></td>
</tr>
<tr class="even">
<td><p>Password</p></td>
<td><p>Необязательный</p></td>
<td><p>Пароль должен состоять по крайней мере из восьми символов и соответствовать всем ограничения для паролей, которые применяются к организации Office 365.</p></td>
<td><p>Этот пароль задается в учетной записи пользователя при преобразовании соответствующего пользователя с включенной поддержкой почты в Exchange Online в почтовый ящик во время миграции.</p></td>
</tr>
<tr class="odd">
<td><p>ForceChangePassword</p></td>
<td><p>Необязательный</p></td>
<td><p><code>True</code> или <code>False</code></p></td>
<td><p>Указывает необходимость изменения пароля при первом входе пользователя в свой почтовый ящик Exchange Online.</p>
<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если реализовано решение с единым входом посредством развертывания служб федерации Active Directory 2.0 (AD FS 2.0) в локальной организации, для этого атрибута необходимо задать значение <code>False</code>.</td>
</tr>
</tbody>
</table>

</td>
</tr>
</tbody>
</table>


## Миграции IMAP

CSV-файл для пакета миграции IMAP должен содержать не более 50 000 строк. Рекомендуется выполнять миграцию пользователей несколькими небольшими пакетами. Дополнительные сведения о миграции IMAP см. в следующих разделах.

  - [Перенос электронной почты с сервера IMAP в почтовые ящики Exchange Online](https://technet.microsoft.com/ru-ru/library/jj874015\(v=exchg.150\))

  - [CSV-файлы для пакетов IMAP-миграции](https://technet.microsoft.com/ru-ru/library/jj200730\(v=exchg.150\))

В следующей таблице приводятся описания атрибутов, поддерживаемых для CSV-файла при миграции IMAP.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Атрибут</th>
<th>Обязательный или дополнительный</th>
<th>Допустимые значения</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>EmailAddress</p></td>
<td><p>Обязательный</p></td>
<td><p>SMTP-адрес пользователя.</p></td>
<td><p>Указывает идентификатор пользователя для его почтового ящика Exchange Online.</p></td>
</tr>
<tr class="even">
<td><p>UserName</p></td>
<td><p>Обязательный</p></td>
<td><p>Строка, которая определяет пользователя в системе обмена сообщениями IMAP в формате, поддерживаемом сервером IMAP.</p></td>
<td><p>Указывает имя для входа в учетную запись пользователя в системе обмена сообщениями IMAP (исходная среда). Помимо имени пользователя, можно использовать данные учетной записи, которой назначены необходимые разрешения на доступ к почтовым ящикам на сервере IMAP. Дополнительные сведения см. в статье <a href="https://technet.microsoft.com/ru-ru/library/jj200730(v=exchg.150)">CSV-файлы для пакетов IMAP-миграции</a>.</p></td>
</tr>
<tr class="odd">
<td><p>Password</p></td>
<td><p>Обязательный</p></td>
<td><p>Строка пароля.</p></td>
<td><p>Указывает пароль для учетной записи пользователя, заданной в атрибуте UserName.</p></td>
</tr>
</tbody>
</table>


## Переопределение значений для пакета миграции значениями атрибутов в CSV-файле

Значения атрибутов в CSV-файле переопределяют значения соответствующих параметров, заданных при создании пакета миграции с помощью Центра администрирования Exchange или командной консоли Exchange. Если значение пакета миграции необходимо применить к пользователю, оставьте эту ячейку пустой в CSV-файле. Это позволит сочетать определенные значения атрибутов для выбранных пользователей в одном пакете миграции.

Предположим, что вы создаете в командной консоли Exchange пакет для перемещения основных и архивных почтовых ящиков пользователя между лесами предприятия с помощью указанной ниже команды Командная консоль Exchange.

    New-MigrationBatch -Name CrossForestBatch1 -SourceEndpoint ForestEndpoint1 -TargetDeliveryDomain forest2.contoso.com -TargetDatabases @(EXCH-MBX-02,EXCH-MBX-03) -TargetArchiveDatabases @(EXCH-MBX-A02,EXCH-MBX-A03) -CSVData ([System.IO.File]::ReadAllBytes("C:\Users\Administrator\Desktop\CrossForestBatch1.csv")) -AutoStart

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Так как основные и архивные почтовые ящики перемещаются по умолчанию, это не требуется явно указывать в командной консоли Exchange.</td>
</tr>
</tbody>
</table>


Часть файла CrossForestBatch1.csv для данного пакета миграции выглядит следующим образом.

    EmailAddress,TargetDatabase,TargetArchiveDatabase
    user1@contoso.com,EXCH-MBX-01,EXCH-MBX-A01
    user2@contoso.com,,
    user3@contoso.com,EXCH-MBX-01,
    ...

Поскольку значения в CSV-файле переопределяют значения для пакета миграции, основные и архивные почтовые ящики пользователя user1 перемещаются в расположения EXCH-MBX-01 и EXCH-MBX-A01 соответственно в конечном лесу. Основные и архивные почтовые ящики пользователя user2 перемещаются в расположение EXCH-MBX-02 или EXCH-MBX-03. Основной почтовый ящик пользователя user3 перемещается в расположение EXCH-MBX-01, а архивный почтовый ящик — в расположение EXCH-MBX-A02 или EXCH-MBX-A03.

Рассмотрим другой пример. Допустим, вы создаете пакет для входящей удаленной миграции при гибридном развертывании, чтобы перенести архивные почтовые ящики в Exchange Online с помощью приведенной ниже команды.

    New-MigrationBatch -Name OnBoarding1 -SourceEndpoint RemoteEndpoint1 -TargetDeliveryDomain cloud.contoso.com -CSVData ([System.IO.File]::ReadAllBytes("C:\Users\Administrator\Desktop\OnBoarding1.csv")) -MailboxType ArchiveOnly -AutoStart

Однако вы также хотите переместить основные почтовые ящики для выбранных пользователей, поэтому часть файла OnBoarding1.csv для данного пакета миграции будет выглядеть следующим образом.

    EmailAddress,MailboxType
    user1@contoso.com,
    user2@contoso.com,
    user3@cloud.contoso.com,PrimaryAndArchive
    user4@cloud.contoso.com,PrimaryAndArchive
    ...

Поскольку значение типа почтового ящика в CSV-файле переопределяет значения параметра *MailboxType* в команде по созданию пакета, в Exchange Online переносится только архивный почтовый ящик для пользователей user1 и user2. Однако основные и архивные почтовые ящики пользователей user3 и user4 перемещаются в Exchange Online.

