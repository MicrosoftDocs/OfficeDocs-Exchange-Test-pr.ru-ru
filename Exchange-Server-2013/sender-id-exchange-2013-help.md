---
title: 'Код отправителя: Exchange 2013 Help'
TOCTitle: Код отправителя
ms:assetid: 0f628f83-df8c-43fb-bf49-7aaa9ec69ab1
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Aa996295(v=EXCHG.150)
ms:contentKeyID: 50487420
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# Код отправителя

 

_**Применимо к:**Exchange Server 2013_

_**Последнее изменение раздела:**2016-12-09_

Агент кодов отправителей — это агент защиты от нежелательной почты, доступный в Microsoft Exchange Server 2013. Чтобы определить действие, которое требуется выполнить (если это необходимо) в отношении входящего сообщения, агент идентификации отправителей проверяет заголовок RECEIVED протокола SMTP и отправляет запрос в службу доменных имен (DNS) системы-отправителя.

Код отправителя предназначен для защиты от имитации отправителя и домена. Этот способ маскировки рассылаемых сообщений часто называют *подменой*. *Поддельное сообщение* — это почтовое сообщение, адрес отправителя которого был изменен таким образом, чтобы он выглядел, как если бы сообщение исходило от отправителя, отличного от фактического отправителя.

Обычно поддельные почтовые отправления содержат адрес отправителя "От:", соответствующий правильному адресу некоторой организации. Еще недавно было относительно легко подменить адрес "От:" как в сеансе SMTP (в заголовке MAIL FROM:), так и в данных RFC 2822 сообщения, например "От: "Masato Kawai" masato@contoso.com", так как заголовки не проверялись.

**Содержание**

Using Sender ID to combat spoofing

Updating your organization's Internet-facing DNS to support Sender ID

Specifying recipients and sender domains to exclude from Sender ID filtering

## Использование кода отправителя для противодействия спуфингу

Код отправителя существенно затрудняет спуфинг. При включенном определении кода отправителя в метаданные каждого сообщения заносится состояние кода отправителя. При получении сообщения электронной почты сервер Exchange Server отправляет запрос на DNS-сервер отправителя, чтобы убедиться, что IP-адрес, с которого получено сообщение, уполномочен отправлять сообщения на домен, указанный в заголовках сообщения. IP-адрес авторизованного сервера-отправителя известен как обозначенный ответственный адрес (PRA).

Администраторы домена Публикация записей системе политики отправителя на DNS-серверов. Записи SPF Определите серверы авторизованного исходящих сообщений электронной почты. Если записи SPF настроена на DNS-сервере отправителя, Exchange server анализ записи SPF и определяет, разрешено ли IP-адрес, с которого сообщение было получено отправлять сообщения от имени домена, который указан в сообщении электронной почты. Дополнительные сведения о содержит записи SPF, а также для создания записи SPF [Идентификатора отправителя](https://go.microsoft.com/fwlink/p/?linkid=50977)см.

Сервер Exchange Server на основе записи SPF обновляет значение состояние кода отправителя в метаданных сообщения. Когда Exchange Server обновляет метаданные сообщения, доставка сообщения выполняется как обычно.

## Значения состояния кода отправителя

Процесс анализа кода отправителя формирует состояние кода отправителя для сообщения. Состояние кода отправителя используется для оценки вероятности нежелательной почты (SCL) для сообщения. Это состояние может принимать одно из следующих значений:

  - **Pass**   IP-адрес и предполагаемый адрес (PRA) прошли проверку идентификации отправителей.

  - **Neutral**   Опубликованные данные кода отправителя являются явно незавершенными.

  - **Soft fail.**   IP-адрес для PRA может быть в неразрешенном наборе.

  - **Fail**   IP-адрес запрещен; адрес PRA не найден во входящей почте или отправляющий домен не существует.

  - **None**   Опубликованных данных системы политики отправителя не существует в DNS отправителя.

  - **TempError**  Временный сбой DNS, например, недоступный сервер DNS.

  - **PermError**   Неверная запись DNS, например ошибка в формате записи.

Состояние кода отправителя добавляется к метаданным сообщения и позже преобразуется в свойство MAPI. Фильтр нежелательной почты в Microsoft Outlook использует свойство MAPI при вычислении значения SCL.

Outlook не отображает состояние кода отправителя и может не помечать сообщение как нежелательное при определенных значениях кода отправителя. Outlook использует значение состояния кода отправителя только в процессе вычисления значения SCL.

Помимо семи ситуаций, формирующих состояния кода отправителя, в процессе анализа кода отправителя могут быть выявлены экземпляры, в которых IP-адрес "От:" вообще отсутствует. Если IP-адрес "От:" отсутствует, состояние кода отправителя не может быть установлено. Если состояние кода отправителя установить не удается, Exchange продолжает обрабатывать сообщение без включения состояния кода отправителя в сообщение. Сообщение не отвергается и не отклоняется. В этом случае состояние кода отправителя не определяется, а событие регистрируется в журнале приложения.

Для получения дополнительных сведений об отображении состояния кода отправителя в сообщениях см. раздел [Метки защиты от спама](anti-spam-stamps-exchange-2013-help.md).

## Параметры кода отправителя для обработки поддельной почты и недостижимых серверов DNS

Можно также указать, как сервер Exchange Server должен обрабатывать сообщения, которые определены как поддельная почта, и как обрабатывать сообщения, когда невозможно получить доступ к DNS-серверу. Обработка сервером Exchange Server поддельной почты и недостижимых серверов DNS может включать в себя следующие действия:

  - **Подтвердить состояние.**   Это действие применяется по умолчанию. Все входящие в организацию сообщения имеют состояние кода отправителя, занесенное в метаданные сообщения.

  - **Отклонить.**   Отклонение сообщения с отправкой отклика об ошибке SMTP на сервер-отправитель. Ответ об ошибке протокола SMTP — это ответ протокола уровня 5*xx* с текстом, который соответствует состоянию кода отправителя.

  - **Удалить.**   Удаление сообщения без отправки системе-отправителю сообщения об удалении. Фактически сервер Exchange Server отправляет на сервер-отправитель фиктивную команду SMTP "OK" и затем удаляет сообщение. Так как сервер-отправитель считает, что сообщение отправлено, он не повторяет отправку сообщения в том же сеансе.

Дополнительные сведения о настройке агента идентификации отправителей см. в разделе [Управление кодом отправителя](manage-sender-id-exchange-2013-help.md).

В начало

## Обновление службы DNS, подключенной к Интернету, для поддержки идентификации отправителей в организации

Эффективность идентификации отправителей зависит от конкретных данных службы DNS. Чем больше организаций обновит свои DNS-серверы, подключенные к Интернету, с помощью записи SPF, тем более эффективно проверка кодов отправителей определяет поддельные сообщения электронной почты.

Для поддержки инфраструктуры Идентификации отправителей, необходимо обновить данные DNS в Интернете, создание записи SPF и размещение записи SPF на общедоступных DNS-серверов. Дополнительные сведения о том, как создать и развернуть записи SPF можно [Идентификатора отправителя](https://go.microsoft.com/fwlink/p/?linkid=50977).

В начало

## Указание доменов получателей и отправителей для исключения из фильтрации кодов отправителей

Иногда может потребоваться исключить из фильтрации кодов отправителей определенные домены получателей и отправителей. Чтобы сделать это, укажите домены получателей и отправителей в командлете **Set-SenderIdConfig** в командной консоли Exchange. Дополнительные сведения см. в разделе [Set-SenderIdConfig](https://technet.microsoft.com/ru-ru/library/aa998859\(v=exchg.150\)).

В начало

