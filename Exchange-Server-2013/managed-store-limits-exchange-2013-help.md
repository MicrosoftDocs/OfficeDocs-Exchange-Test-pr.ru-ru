---
title: 'Ограничения управляемого хранилища: Exchange 2013 Help'
TOCTitle: Ограничения управляемого хранилища
ms:assetid: bea9ec15-bfb5-4716-b14e-010e389c9f9e
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Mt741981(v=EXCHG.150)
ms:contentKeyID: 73226026
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Ограничения управляемого хранилища

 

_**Последнее изменение раздела:**2016-09-15_

**Сводка.** Сведения об ограничениях на подключения к управляемому хранилищу и их настройке.

В МайкрософтExchange Server 2013 на управляемое хранилище Exchange были наложены ограничения подключения и использования, которые не дают одному приложению или одному пользователю применять все доступные подключения к управляемому хранилищу. Если разрешить одному пользователю или приложению применять все подключения, то другие пользователи или приложения не смогут получить доступ к управляемому хранилищу, что может привести к простою.

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Для всех подключений, совершенных учетными записями с правами администратора, максимальное количество сеансов было увеличено до 64 000.</td>
</tr>
</tbody>
</table>


## Терминология

Знание приведенных ниже терминов поможет вам получить общее представление о типах соединений, упоминаемых в этой статье.

  - Сеансы  
    Сеансы представляют подключения, используемые службами и клиентскими приложениями, такими как Microsoft Outlook, для подключения к управляемому хранилищу. У служб и клиентов может быть одновременно открыто несколько сеансов. Термины *подключения* и *сеансы* являются взаимозаменяемыми.

<!-- end list -->

  - Потоки  
    Потоки представляют одновременно выполняемые запросы к управляемому хранилищу. Например, если пользователь откроет папку в Outlook, Outlook выполнит запрос к управляемому хранилищу от имени этого пользователя. Этот выполняющийся запрос представляет собой один поток.
    
    В Exchange Server 2013 отсутствуют ограничения на длину потока по типу клиента. Максимальное количество потоков **на базу данных почтовых ящиков** составляет 50 для всех клиентов. Исключением является служба доступности, для которой количество потоков на пользователя ограничено 16.

В начало

## Ограничения сеансов

В приведенной ниже таблице перечислены типы клиентских подключений к управляемому хранилищу и ограничения для них. Сведения о том, как изменить ограничения сеансов, см. в разделе "Настройка ограничений сеансов" сразу после таблицы.

В предыдущих версиях Exchange заданы ограничения на количество подключений к управляемому хранилищу в зависимости от количества подключений на сервер. В Exchange 2013 ограничения сеансов заданы исходя из количества подключений на базу данных почтовых ящиков.

Типы ограничений на подключения, заданных в Exchange 2013:

  - **Максимальное количество сеансов на процесс**. Задает максимальное количество сеансов, которое может быть одновременно открыто службой Exchange в базе данных почтовых ящиков.

  - **Максимальное количество сеансов пользователей на процесс**. Задает максимальное число сеансов по отдельному протоколу для одного пользователя.

В следующем разделе, "Настройка ограничений сеансов", описано изменение этих ограничений.


<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>Тип клиента</th>
<th></th>
<th>Максимальное количество сеансов на базу данных почтовых ящиков</th>
<th>Количество пользовательских сеансов по умолчанию на одну базу данных почтовых ящиков</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Администратор</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="even">
<td><p>Служба доступности</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>Индексирование содержимого</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="even">
<td><p>Exchange ActiveSync</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>Веб-службы Exchange</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="even">
<td><p>Управление</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>MAPI on the Middle Tier (MoMT)</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>32</p></td>
</tr>
<tr class="even">
<td><p>MSExchangeMailboxAssistants: события</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="odd">
<td><p>MSExchangeMailboxAssistants: контроль по времени</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="even">
<td><p>Удаленный вызов процедур MSExchange</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>Microsoft OfficeOutlook Web App</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="even">
<td><p>Протоколы POP3 и IMAP4</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>Транспорт</p></td>
<td></td>
<td><p>10 000</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="even">
<td><p>Единая система обмена сообщениями.</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
<tr class="odd">
<td><p>Другие</p></td>
<td></td>
<td><p>Неприменимо</p></td>
<td><p>16</p></td>
</tr>
</tbody>
</table>


## Настройка ограничений сеансов

Ограничения сеансов по умолчанию можно изменить.

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если требуется изменить ограничения сеансов, это необходимо сделать на серверах почтовых ящиков во всех группах обеспечения доступности баз данных (DAG). Если не внести идентичные изменения на всех серверах, результаты будут противоречивыми. Чтобы повысить ограничение сеанса на сервере клиентского доступа, необходимо увеличить значение <code>RCAMaxConcurrency</code> в политике регулирования. Дополнительные сведения см. в статье <a href="https://technet.microsoft.com/ru-ru/library/dd298094(v=exchg.150)">Set-ThrottlingPolicy</a>.</td>
</tr>
</tbody>
</table>


<table>
<thead>
<tr class="header">
<th><img src="images/Dd876857.Caution(EXCHG.150).gif" title="Внимание!" alt="Внимание!" />Внимание!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Неправильное изменение реестра может привести к серьезным неполадкам, требующим переустановки операционной системы. Проблемы, возникшие в результате неправильного изменения реестра, могут оказаться неустранимыми. Перед внесением изменений в реестр выполните резервное копирование всех важных данных.</td>
</tr>
</tbody>
</table>


1.  Запустите редактор реестра (regedit).

2.  Перейдите к следующему подразделу реестра:
    
    **\\\\HKEY\_LOCAL\_MACHINE \\SYSTEM\\CurrentControlSet\\Services\\MSExchangeIS\\ParametersSystem**.

3.  Щелкните правой кнопкой мыши раздел **ParametersSystem**, наведите указатель на пункт **Создать**, а затем выберите пункт **Значение DWORD (32 бита)**.
    
    В области результатов будет создано новое значение.

4.  Измените имя раздела на одно из следующих значений и нажмите клавишу ВВОД:
    
      - **Maximum Allowed Sessions Per User**. Это ограничение задает максимально допустимое число сеансов на каждого пользователя.
    
      - **Maximum Allowed Service Sessions Per User**. Это ограничение задает максимально допустимое число сеансов службы на каждого пользователя.
    
      - **Maximum Allowed Exchange Sessions Per Service**. Это ограничение задает максимально допустимое число сеансов Exchange на каждую службу. Значение по умолчанию составляет 10 000.

5.  Щелкните правой кнопкой мыши новый раздел и выберите пункт **Изменить**.

6.  В поле **Значение** введите нужное максимальное количество объектов для этой записи и нажмите кнопку **ОК**. Значения по умолчанию указаны в приведенной выше таблице.

В начало

## Ограничения открытых элементов

Ограничения открытых элементов представляют собой максимальное количество элементов, которые можно открывать в одном почтовом ящике за один сеанс. Однако пользователь может открыть несколько сеансов одновременно. Например, если пользователь открыл два сеанса, он может открыть 1000 папок.

Сведения о том, как изменить эти ограничения, см. в разделе "Настройка ограничений открытых элементов" сразу после таблицы.


<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th>Тип элемента</th>
<th>Тип объекта реестра</th>
<th>Максимальное количество открытых за сеанс элементов</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Представление списка управления доступом</p></td>
<td><p>objtACLView</p></td>
<td><p>500</p></td>
</tr>
<tr class="even">
<td><p>Вложение</p></td>
<td><p>objtAttachment</p></td>
<td><p>500</p></td>
</tr>
<tr class="odd">
<td><p>Представление вложения</p></td>
<td><p>objtAttachmentView</p></td>
<td><p>500</p></td>
</tr>
<tr class="even">
<td><p>CStream</p></td>
<td><p>objtCStream</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="odd">
<td><p>Папка</p></td>
<td><p>objtFolder</p></td>
<td><p>500</p></td>
</tr>
<tr class="even">
<td><p>Представление папки</p></td>
<td><p>objtFolderView</p></td>
<td><p>500</p></td>
</tr>
<tr class="odd">
<td><p>Целевой поток FX</p></td>
<td><p>objtFXDstStrm</p></td>
<td><p>500</p></td>
</tr>
<tr class="even">
<td><p>Исходный поток FX</p></td>
<td><p>objtFXSrcStrm</p></td>
<td><p>500</p></td>
</tr>
<tr class="odd">
<td><p>Сообщение</p></td>
<td><p>objtMessage</p></td>
<td><p>250</p></td>
</tr>
<tr class="even">
<td><p>Представление сообщения</p></td>
<td><p>objtMessageView</p></td>
<td><p>500</p></td>
</tr>
<tr class="odd">
<td><p>Уведомление</p></td>
<td><p>objtNotify</p></td>
<td><p>500,000</p></td>
</tr>
<tr class="even">
<td><p>Представление правила</p></td>
<td><p>objtRulesView</p></td>
<td><p>Неприменимо</p></td>
</tr>
<tr class="odd">
<td><p>Поток</p></td>
<td><p>objtStream</p></td>
<td><p>250</p></td>
</tr>
</tbody>
</table>


## Настройка ограничений открытых элементов

Максимальное количество ресурсов, которые одновременно может использовать клиент MAPI, можно ограничить.

<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если требуется изменить ограничения открытых элементов, это необходимо сделать на серверах почтовых ящиков во всех группах обеспечения доступности баз данных и массивах клиентского доступа. Если не внести идентичные изменения на всех серверах, результаты будут противоречивыми.</td>
</tr>
</tbody>
</table>


<table>
<thead>
<tr class="header">
<th><img src="images/Dd876857.Caution(EXCHG.150).gif" title="Внимание!" alt="Внимание!" />Внимание!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Неправильное изменение реестра может привести к серьезным неполадкам, требующим переустановки операционной системы. Проблемы, возникшие в результате неправильного изменения реестра, могут оказаться неустранимыми. Перед внесением изменений в реестр выполните резервное копирование всех важных данных.</td>
</tr>
</tbody>
</table>


1.  Запустите редактор реестра (regedit).

2.  Перейдите к следующему подразделу реестра:
    
    **\\\\HKEY\_LOCAL\_MACHINE \\SYSTEM\\CurrentControlSet\\Services\\MSExchangeIS\\ParametersSystem**

3.  Щелкните правой кнопкой мыши объект **ParametersSystem** и выберите последовательно команды **Создать** и **Раздел**.
    
    В дереве консоли будет создан новый раздел.

4.  Измените имя раздела на **MaxObjsPerMapiSession** и нажмите клавишу ВВОД.

5.  Щелкните правой кнопкой мыши раздел **MaxObjsPerMapiSession**, наведите указатель на пункт **Создать** и выберите пункт **Значение DWORD (32 бита)**.
    
    В области результатов будет создано новое значение.

6.  Измените имя раздела на *\<Object\_type\>*, где *\<Object\_type\>* — имя изменяемого типа объекта реестра. Например, чтобы изменить максимальное количество открываемых элементов, используйте параметр *objtMessage*. Нажмите клавишу ВВОД.

7.  Щелкните правой кнопкой мыши новый раздел и выберите пункт **Изменить**.

8.  В поле **Значение** введите максимальное количество объектов для этой записи и нажмите кнопку **ОК**. Например, введите **350**, чтобы увеличить значение для объекта.

9.  Перезапустите службу банка данных Microsoft Exchange.

В начало

## Ограничения размеров элементов

Ограничения размеров элементов — это ограничения, накладываемые на элементы в почтовых ящиках пользователей. Их можно настраивать с помощью параметров *MaxSendSize* и *MaxReceiveSize* командлета [Set-Mailbox](https://technet.microsoft.com/ru-ru/library/bb123981\(v=exchg.150\)).


<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th>Тип элемента</th>
<th>Ограничение</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Сообщение (сохраненное)</p></td>
<td><p>Максимальный размер SendLimit, ReceiveLimit</p></td>
</tr>
<tr class="even">
<td><p>Сообщение (отправленное)</p></td>
<td><p>Максимальный размер SendLimit</p></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>


В начало

