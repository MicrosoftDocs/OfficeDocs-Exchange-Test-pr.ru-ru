---
title: 'Параметры WhatIf, Confirm и ValidateOnly: Exchange 2013 Help'
TOCTitle: Параметры WhatIf, Confirm и ValidateOnly
ms:assetid: a850eea7-431e-49c5-b877-1ebde2a2b48f
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Bb124088(v=EXCHG.150)
ms:contentKeyID: 50488825
ms.date: 05/22/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# Параметры WhatIf, Confirm и ValidateOnly

 

_**Применимо к:** Exchange Server 2013_

_**Последнее изменение раздела:** 2012-10-04_

Как опытным администраторам и создателям сценариев, так и администраторам, которые недавно приступили к работе с Exchange и созданию сценариев, могут быть полезны параметры *WhatIf*, *Confirm* и *ValidateOnly*. Данные параметры позволяют контролировать выполнение команд и точно определять результат до того, как выполнение команды повлияет на данные. Такая возможность особенно важна для перехода от тестовой среды к рабочей и для распространения новых сценариев или команд.

Параметры *WhatIf*, *Confirm* и *ValidateOnly* особенно полезны при использовании с командами, которые изменяют объекты, возвращаемые с помощью фильтра или с помощью использования команды **Get** в конвейере. В данном разделе описывается каждый параметр, а также приводится пример команды для каждого параметра.

<table>
<thead>
<tr class="header">
<th><img src="images/Dd876857.important(EXCHG.150).gif" title="Важно" alt="Важно" />Важно!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Если необходимо использовать параметры <em>WhatIf</em>, <em>Confirm</em> и <em>ValidateOnly</em> с командами в составе сценария, необходимо добавить соответствующий параметр к каждой команде в сценарии, а не указывать их в командной строке вызова сценария.</td>
</tr>
</tbody>
</table>


<table>
<thead>
<tr class="header">
<th><img src="images/JJ126620.note(EXCHG.150).gif" title="Примечание" alt="Примечание" />Примечание.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><em>WhatIfConfirm</em> и <em>ValidateOnly</em> называются параметрами-переключателями. Дополнительные сведения о параметрах-переключателях см. в разделе <a href="https://technet.microsoft.com/ru-ru/library/bb124388(v=exchg.150)">Параметры</a>.</td>
</tr>
</tbody>
</table>


## Параметр WhatIf

Параметром *WhatIf* указывается выполнение команды, для которой он применяется, но с отображением только объектов, которые были бы изменены в результате выполнения данной команды, и внесенных изменений. Фактически параметр не изменяет никакие из этих объектов. Используя параметр *WhatIf*, можно посмотреть, соответствуют ли ожиданиям изменения, которые были бы внесены в данные объекты, не опасаясь изменения данных объектов.

При выполнении команды с переключателем *WhatIf* переключатель *WhatIf* необходимо указать в конце команды, как показано в следующем примере.

    New-AcceptedDomain -Name "Contoso Domain" -DomainName "contoso.com" -WhatIf 

При выполнении команды из данного примера командная консоль возвращает следующий текст:

    What if: Creating Accepted Domain "Contoso Domain" with domain name "contoso.com".

## Параметр Confirm

Параметром *Confirm* указывает команде, для которой он применяется, остановить обработку до того, как будут внесены какие-либо изменения. Командой затем запрашивается подтверждение для каждого действия перед продолжением выполнения. С помощью параметра *Confirm* можно изменять объекты поэтапно, чтобы удостовериться, что изменяются только необходимые объекты. Такая возможность полезна, если изменяется большое количество объектов и требуется точный контроль операций командной консоли. Перед изменением командной консолью для каждого объекта отображается запрос на подтверждение.

По умолчанию командная консоль автоматически применяет параметр *Confirm* для командлетов, которые имеют в своем составе следующие команды:

  - **Clear**

  - **Disable**

  - **Dismount**

  - **Move**

  - **Remove**

  - **Stop**

  - **Suspend**

  - **Uninstall**

Если выполняется командлет, в составе которого есть любая из данных команд, командная консоль автоматически останавливает выполнение командлета и ожидает подтверждения перед продолжением обработки.

При применении параметра *Confirm* в какой-либо команде вручную, параметр *Confirm* должен быть помещен в конец команды, как в следующем примере:

    Get-JournalRule | Enable-JournalRule -Confirm

При выполнении команды из данного примера командная консоль возвращает следующий запрос на подтверждение:

    Confirm
    Are you sure you want to perform this action?
    Enabling journal rule "Litigation Journal Rule".
    [Y] Yes  [A] Yes to All  [N] No  [L] No to All  [S] Suspend  [?] Help
    (default is "Y"):

Запросом на подтверждение предлагаются следующие варианты:

  - **\[Y\] Yes**.   Ввод **Y** указывает команде продолжить выполнение операции. Следующая операция запросит еще одно подтверждение. Значение по умолчанию — `[Y] Yes`.

  - **\[A\] Yes to All**.   Ввод **A** указывает команде продолжить выполнение данной и всех последующих операций. Во время выполнения данной команды больше не будет дополнительных запросов на подтверждение.

  - **\[N\] No**.   Ввод **N** указывает команде пропустить данную операцию и перейти к выполнению следующей операции. Следующей операцией будет запрошено еще одно подтверждение.

  - **\[L\] No to All**.   Ввод **L** указывает команде пропустить данную и все последующие операции.

  - **\[S\] Suspend**.   При вводе **S** приостанавливается выполнение текущего конвейера и происходит возврат к командной строке. При вводе **Exit** выполнение конвейера продолжается.

  - **\[?\] Help**.   При вводе **?** в командной строке отображается справка по запросам на подтверждение.

Если необходимо переопределить настройки по умолчанию среды управления и отключить вывод запросов на подтверждение для командлетов, для которых он применяется автоматически, необходимо включить в них параметр *Confirm* со значением `$False`, как в следующем примере:

    Get-JournalRule | Disable-JournalRule -Confirm:$False

В данном случае не отображается никаких запросов на подтверждение.

<table>
<thead>
<tr class="header">
<th><img src="images/Dd876857.Caution(EXCHG.150).gif" title="Внимание!" alt="Внимание!" />Внимание!</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>В этом случае параметр <em>Confirm</em> имеет по умолчанию значение <code>$True</code>. По умолчанию в командной консоли автоматически отображается запрос на подтверждение. При отмене данного поведения по умолчанию команде дается указание отменить все запросы на подтверждение на время действия данной команды. Командой будут обрабатываться все объекты, которые соответствуют условиям, определенным для данной команды, без подтверждения.</td>
</tr>
</tbody>
</table>


## Параметр ValidateOnly

При использовании параметра *ValidateOnly* команда, к которой он применяется, оценивает все условия и требования, необходимые для выполнения операции, перед тем как вносить какие-либо изменения. Параметр *ValidateOnly* доступен для командлетов, для выполнения которых может потребоваться длительное время, у которых есть зависимости для нескольких систем или которые изменяют критически важные данные, например почтовые ящики.

При применении для команды параметра *ValidateOnly* эта команда выполняется на протяжении всего процесса. Команда выполняет все действия так же, как и без параметра *ValidateOnly*. Но командой не изменяются никакие объекты. После того как команда завершает обработку, она отображает итоговые результаты проверки. Если результаты проверки показывают, что выполнение команды было успешным, можно выполнить команду еще раз без параметра *ValidateOnly*.

При выполнении команды с параметром *ValidateOnly* параметр *ValidateOnly* необходимо указать в конце команды.

