---
title: 'Общие сведения о фильтрах области ролей управления: Exchange 2013 Help'
TOCTitle: Общие сведения о фильтрах области ролей управления
ms:assetid: 6acc2922-ee9c-41f1-8a0f-10a541e8c273
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Dd298043(v=EXCHG.150)
ms:contentKeyID: 50488185
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Общие сведения о фильтрах области ролей управления

 

_**Применимо к:** Exchange Online, Exchange Server 2013_

_**Последнее изменение раздела:** 2015-03-09_

Фильтры области ролей управления могут использоваться для определения областей управления, которые обладают возможностями гибкой настройки. С помощью фильтров области можно создать область, соответствующую выбранному способу сегментации получателей, баз данных и серверов, чтобы администраторы могли управлять только теми объектами, к которым они должны иметь доступ. В фильтрах области можно использовать практически любое свойство объекта получателя, базы данных или сервера.

Чтобы применять фильтры области роли, необходимо иметь представление об областях ролей управления. Дополнительные сведения об областях действия для ролей управления см. в разделе [Общие сведения об областях ролей управления](understanding-management-role-scopes-exchange-2013-help.md).

Фильтруемые настраиваемые области в Microsoft Exchange Server 2013 создаются с помощью командлета **New-ManagementScope**. Эти два типа фильтруемых областей, получателей и конфигураций (которые состоят из областей сервера и базы данных), подразделяются на обычные и монопольные области. В следующем списке показано, какой параметр в командлете **New-ManagementScope** следует использовать для создания каждого типа фильтруемых областей:

  - **Стандартная фильтруемая область получателей**   Для создания этого типа фильтруемых областей используется параметр *RecipientRestrictionFilter*.

  - **Монопольная фильтруемая область получателей**   Для создания этого типа фильтруемых областей используется параметр *RecipientRestrictionFilter* наряду с параметром-переключателем *Exclusive*.

  - **Стандартная фильтруемая область серверных конфигураций**   Для создания этого типа фильтруемых областей используется параметр *ServerRestrictionFilter*.

  - **Монопольная фильтруемая область серверных конфигураций**   Для создания этого типа фильтруемых областей используется параметр *ServerRestrictionFilter* наряду с параметром-переключателем *Exclusive*.

  - **Обычная фильтруемая область конфигураций баз данных**   Для создания этого типа фильтруемых областей используется параметр *DatabaseRestrictionFilter*.

  - **Монопольная фильтруемая область конфигураций баз данных**   Для создания этого типа фильтруемых областей используется параметр *DatabaseRestrictionFilter* с параметром *Exclusive*.

Когда создается фильтруемая настраиваемая область, выполняется попытка сопоставления фильтра со всеми объектами, доступными в неявной области чтения данной роли управления. Если такой объект находится, он включается в результаты, возвращаемые фильтром, и объект становится доступным для роли управления через настраиваемую область. Фильтр может возвращать результаты, которые выходят за пределы неявной области роли управления.

Если область получателей задается с помощью параметра *RecipientRestrictionFilter*, то для указания подразделения (OU) с целью ограничения фильтра можно использовать параметр *RecipientRoot*. Когда задается подразделение в параметре *RecipientRoot*, то в фильтре получателей выполняется попытка сопоставить только тех получателей, которые находятся в этом подразделении, а не во всей неявной области чтения.

Сведения о создании области управления с помощью фильтруемых свойств, описанных в этом разделе, см. в разделе [Создание регулярной или монопольной области](create-a-regular-or-exclusive-scope-exchange-2013-help.md).

## Синтаксис фильтров

Как в фильтрах получателей, так и в фильтрах конфигураций для создания запроса с фильтром используется одна синтаксическая конструкция. Во всех запросах с фильтром должны присутствовать как минимум следующие компоненты:

  - **Открывающая скобка**   Открывающая фигурная скобка ({) указывает на начало запроса с фильтром.

  - **Свойство для проверки**   Данное свойство — это значение объекта, которое необходимо проверить. Например, это может быть город или отдел в объекте получателя или имя сайта либо сервера Active Directory в объекте конфигурации сервера, или имя базы данных в объекте конфигурации базы данных.

  - **Оператор сравнения**   Оператор сравнения определяет, как в запросе должно оцениваться заданное значение по сравнению со значением в свойстве. Например, операторы сравнения могут быть следующими: **Eq**, который означает отношение равенства; **Ne**, что означает "не равно"; или **Like**, что означает подобие и т. д. Полный список операторов, которые можно использовать в командной консоли Exchange, см. в разделе [Операторы сравнения](https://technet.microsoft.com/ru-ru/library/bb125229\(v=exchg.150\)).

  - **Значение для сравнения**   Значение, заданное в запросе с фильтром, будет сравниваться со значением, которое хранится в указанном свойстве. Задаваемое значение должно заключаться в кавычки ("). Если необходимо указать частичную строку, можно ее заключить в подстановочные знаки (\*) и использовать оператор сравнения, который поддерживает такие знаки, например **Like**. Любая строка, которая содержит частичную строку, будет соответствовать запросу с фильтром.

  - **Закрывающая скобка**   Закрывающая фигурная скобка (}) обозначает конец запроса с фильтром.

Следующие компоненты являются необязательными и позволяют создать более сложные запросы с фильтром:

  - **Круглые скобки**   Как и в математике, круглые скобки, ( ), в запросе с фильтром позволяют принудительным образом изменять порядок выполнения действий. В первую очередь вычисляется выражение в самых внутренних скобках, затем выполняются операции во внешних по отношению к ним скобках по очереди.

  - **Логические операторы**   Логические операторы связывают вместе одну или несколько операций сравнения и требуют использования запроса с фильтром для оценки всего выражения. Например, к логическим операторам относятся **And**, **Or** или **Not**.

Если составить простой запрос, то он выглядит как `{ City -Eq "Vancouver" }`. В этом фильтре отбираются те получатели, свойство **City** которых имеет значение "Vancouver".

Другой, более сложный запрос выглядит так: `{ ((City -Eq "Vancouver") -And (Department -Eq "Sales")) -Or (Title -Like "*Manager*") }`. Запрос с фильтром вычисляется в следующем порядке:

1.  Оцениваются свойства **City** и **Department**. Для каждого из них устанавливаются значения `True` или `False`, в зависимости от значений, хранящихся в каждом свойстве.

2.  Затем вычисляются результаты выражений **City** и **Department**. Если оба из них равны `True`, то все выражение **And** будет иметь значение `True`. Если одно или оба выражения равны `False`, то все выражение **And** будет иметь значение `False`. Применимо следующее:
    
      - Если выражение **And** равно `True`, то весь запрос с фильтром становится равным `True`, так как оператор **Or** указывает, что одна или другая сторона запроса должна иметь значение `True`. Объект проходит процедуру назначения роли.
    
      - Если выражение **And** имеет значение `False`, то фильтр с запросом продолжает вычислять свойство **Title**.

3.  Затем вычисляется свойство **Title**. Оно устанавливается равным `True` или `False`, в зависимости от значения свойства **Title**. Применимо следующее:
    
      - Если свойство **Title** равно `True`, то весь запрос с фильтром будет иметь значение `True`, так как оператор **Or** указывает, что одна либо другая сторона запроса должна быть равна `True`. Объект проходит процедуру назначения роли.
    
      - Если свойство **Title** равно `False`, то весь запрос с фильтром будет иметь значение `False`, а объект не проходит процедуру назначения роли.

В следующей таблице приведен пример со значениями, который показывает, когда сложный запрос будет оцениваться как `True`, а когда — `False`.

### Сложный запрос

<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th>City</th>
<th>Department</th>
<th>Title</th>
<th>Результат</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Vancouver (True)</p></td>
<td><p>Sales (True)</p></td>
<td><p>CEO (False)</p></td>
<td><p>Значение True, так как свойства <strong>City</strong> и <strong>Department</strong> равны True. Свойство <strong>Title</strong> не вычисляется, так как условия запроса с фильтром уже выполнены.</p></td>
</tr>
<tr class="even">
<td><p>Seattle (False)</p></td>
<td><p>Sales (True)</p></td>
<td><p>IT Manager (True)</p></td>
<td><p>Значение True, так как свойство <strong>Title</strong> имеет значение True. Результаты сравнения для свойств <strong>City</strong> и <strong>Department</strong> отбрасываются, так как свойство <strong>Title</strong> равно True, что приводит к выполнению условий первого фильтра.</p>

> [!NOTE]  
> Значение IT Manager удовлетворяет запросу с фильтром, так как использовался оператор сравнения <strong>Like</strong>, который соответствует частичным строкам, когда в запросе с фильтром используются подстановочные знаки (*).

</td>
</tr>
<tr class="odd">
<td><p>Vancouver (True)</p></td>
<td><p>Marketing (False)</p></td>
<td><p>Writer (False)</p></td>
<td><p>Значение False, так как ни одно из свойств <strong>City</strong> и <strong>Department</strong> не равно True, так же как и свойство <strong>Title</strong> не равно True.</p></td>
</tr>
</tbody>
</table>


## Фильтруемые свойства получателей

При создании фильтра получателей можно использовать практически любое свойство объекта получателя. Список фильтруемых свойств получателя см. в разделе [Фильтруемые свойства для параметра -RecipientFilter](https://technet.microsoft.com/ru-ru/library/bb738157\(v=exchg.150\)). Хотя в этом разделе описываются свойства, которые можно использовать вместе с параметром *RecipientFilter* в других командлетах, большинство этих свойств также работает с параметром *RecipientRestrictionFilter* в командлете **New-ManagementScope**.

## Фильтруемые свойства серверов

При создании области управления с параметром *ServerRestrictionFilter* можно использовать следующие свойства:

  - **CurrentServerRole**

  - **CustomerFeedbackEnabled**

  - **DataPath**

  - **DistinguishedName**

  - **ExchangeLegacyDN**

  - **ExchangeLegacyServerRole**

  - **ExchangeVersion**

  - **Fqdn**

  - **Guid**

  - **InternetWebProxy**

  - **Name**

  - **NetworkAddress**

  - **ObjectCategory**

  - **ObjectClass**

  - **ProductID**

  - **ServerRole**

  - **ServerSite**

  - **WhenChanged**

  - **WhenChangedUTC**

  - **WhenCreated**

  - **WhenCreatedUTC**

## Фильтруемые свойства баз данных

При создании области управления с параметром *DatabaseRestrictionFilter* можно использовать следующие свойства базы данных:

  - **AdminDisplayName**

  - **AllowFileRestore**

  - **BackgroundDatabaseMaintenance**

  - **CircularLoggingEnabled**

  - **DatabaseCreated**

  - **DeletedItemRetention**

  - **Description**

  - **DistinguishedName**

  - **EdbFilePath**

  - **EventHistoryRetentionPeriod**

  - **ExchangeLegacyDN**

  - **ExchangeVersion**

  - **Guid**

  - **IssueWarningQuota**

  - **LogFilePrefix**

  - **LogFileSize**

  - **LogFolderPath**

  - **MasterServerOrAvailabilityGroup**

  - **MountAtStartup**

  - **Name**

  - **ObjectCategory**

  - **ObjectClass**

  - **RetainDeletedItemsUntilBackup**

  - **Server**

  - **WhenChanged**

  - **WhenChangedUTC**

  - **WhenCreated**

  - **WhenCreatedUTC**

