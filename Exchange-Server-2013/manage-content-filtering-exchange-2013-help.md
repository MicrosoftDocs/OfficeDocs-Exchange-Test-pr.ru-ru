---
title: 'Управление фильтрацией содержимого: Exchange 2013 Help'
TOCTitle: Управление фильтрацией содержимого
ms:assetid: 05bd9d39-81dc-4514-8b75-7be386d5bcad
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/Aa995953(v=EXCHG.150)
ms:contentKeyID: 50487381
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Управление фильтрацией содержимого

 

_**Применимо к:** Exchange Server 2013_

_**Последнее изменение раздела:** 2015-04-08_

Фильтрация контента обеспечивается агентом фильтра контента. Агент фильтра контента фильтрует все сообщения, поступающие через все соединители приема на сервере Exchange. Фильтр применяется только к сообщениям, поступающим из источников, не прошедших проверку подлинности.

## Что нужно знать перед началом работы?

  - Предполагаемое время для завершения каждой процедуры: 10 минут

  - Для выполнения этих процедур необходимы соответствующие разрешения. Сведения о необходимых разрешениях см. в статье Запись "Функция защиты от нежелательной почты" в разделе [Разрешения для защиты от нежелательной почты и вредоносных программ](anti-spam-and-anti-malware-permissions-exchange-2013-help.md).

  - Для выполнения этой процедуры можно использовать только командную консоль.

  - По умолчанию функции защиты от нежелательной почты в транспортной службе на сервере почтовых ящиков не включены. Как правило, функции защиты от нежелательной почты на сервере почтовых ящиков включают, только если организация Exchange не выполняет никакую предварительную фильтрацию нежелательной почты до приема входящих сообщений. Дополнительную информацию см. в статье [Включение функции защиты от нежелательной почты на сервере почтовых ящиков](enable-anti-spam-functionality-on-mailbox-servers-exchange-2013-help.md).

  - Сочетания клавиш для процедур, описанных в этой статье, приведены в статье [Сочетания клавиш в Центре администрирования Exchange](keyboard-shortcuts-in-the-exchange-admin-center-exchange-online-protection-help.md).

> [!TIP]  
> Возникли проблемы? Обратитесь за помощью к участникам форумов, посвященных Exchange. Посетите форумы по таким продуктам: <a href="https://go.microsoft.com/fwlink/p/?linkid=60612">Exchange Server</a>, <a href="https://go.microsoft.com/fwlink/p/?linkid=267542">Exchange Online</a> или <a href="https://go.microsoft.com/fwlink/p/?linkid=285351">Exchange Online Protection</a>.


## Что необходимо сделать?

## Использование командной консоли для включения или отключения фильтрации содержимого

Чтобы отключить фильтрацию контента, выполните следующую команду:

    Set-ContentFilterConfig -Enabled $false

Чтобы включить фильтрацию содержимого, выполните следующую команду:

    Set-ContentFilterConfig -Enabled $true

> [!NOTE]  
> При отключении фильтрации контента, соответствующий агент фильтрации все еще включен. Чтобы выключить агент фильтрации контента, выполните следующую команду: <code>Disable-TransportAgent &quot;Content Filter Agent&quot;</code>.


## Как проверить, что все получилось?

Чтобы проверить успешность включения или выключения фильтрации контента, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List Enabled

2.  Проверьте значение отображаемого свойства *Enabled*.

## Использование командной консоли для включения или отключения фильтрации контента для внешних сообщений

По умолчанию фильтрация содержимого включена для внешних сообщений.

Чтобы отключить фильтрацию контента для внешних сообщений, выполните следующую команду:

    Set-ContentFilterConfig -ExternalMailEnabled $false

Чтобы включить фильтрацию контента для внешних сообщений, выполните следующую команду:

    Set-ContentFilterConfig -ExternalMailEnabled $true

## Как проверить, что все получилось?

Чтобы проверить успешность включения или выключения фильтрации контента для внешних сообщений, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List ExternalMailEnabled

2.  Проверьте значение отображаемого свойства *ExternalMailEnabled*.

## Использование командной консоли для включения или отключения фильтрации контента для внутренних сообщений

Не рекомендуется применять фильтры к сообщениям от доверенных партнеров или сообщениям внутри организации. При использовании фильтров нежелательных сообщений всегда есть вероятность ложного срабатывания фильтра. Чтобы снизить вероятность ошибочного отклонения сообщений электронной почты фильтрами, следует включать агенты фильтрации нежелательных сообщений только в отношении непроверенных и неизвестных источников.

Чтобы включить фильтрацию контента для внутренних сообщений, выполните следующую команду:

    Set-ContentFilterConfig -InternalMailEnabled $true

Чтобы выключить фильтрацию контента для внутренних сообщений, выполните следующую команду:

    Set-ContentFilterConfig -InternalMailEnabled $false

## Как проверить, что все получилось?

Чтобы проверить успешность включения или выключения фильтрации контента для внутренних сообщений, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List InternalMailEnabled

2.  Проверьте значение отображаемого свойства *InternalMailEnabled*.

## Использование командной консоли, чтобы настроить исключения для получателей и отправителей

Чтобы заменить существующие значения, выполните следующую команду:

    Set-ContentFilterConfig -BypassedRecipients <recipient1,recipient2...> -BypassedSenders <sender1,sender2...> -BypassedSenderDomains <domain1,domain2...>

В этом примере настраиваются следующие исключения для фильтрации контента:

  - Получатели laura@contoso.com и julia@contoso.com не проверяются при фильтрации контента.

  - Отправители steve@fabrikam.com и cindy@fabrikam.com не проверяются при фильтрации контента.

  - Все отправители из домена nwtraders.com и дочерних доменов не проверяются при фильтрации контента.

<!-- end list -->

    Set-ContentFilterConfig -BypassedRecipients laura@contoso.com,julia@contoso.com -BypassedSenders steve@fabrikam.com,cindy@fabrikam.com -BypassedSenderDomains *.nwtraders.com

Чтобы добавить или удалить записи, не изменив существующие значения, выполните следующую команду:

    Set-ContentFilterConfig -BypassedRecipients @{Add="<recipient1>","<recipient2>"...; Remove="<recipient1>","<recipient2>"...} -BypassedSenders @{Add="<sender1>","<sender2>"...; Remove="<sender1>","<sender2>"...} -BypassedSenderDomains @{Add="<domain1>","<domain2>"...; Remove="<domain1>","<domain2>"...}

В этом примере настраиваются следующие исключения в фильтрации контента:

  - Добавить tiffany@contoso.com и chris@contoso.com в список текущих получателей, которые не проверяются при фильтрации контента.

  - Добавить joe@fabrikam.com и michelle@fabrikam.com в список текущих получателей, которые не проверяются при фильтрации контента.

  - Добавить blueyonderairlines.com в список текущих доменов, отправители из которых не проверяются при фильтрации контента.

  - Удалить домен woodgrovebank.com и все его дочерние домены из списка текущих доменов, отправители из которых не проверяются при фильтрации контента.

<!-- end list -->

    Set-ContentFilterConfig -BypassedRecipients @{Add="tiffany@contoso.com","chris@contoso.com"} -BypassedSenders @{Add="joe@fabrikam.com","michelle@fabrikam.com"} -BypassedSenderDomains @{Add="blueyonderairlines.com"; Remove="*.woodgrovebank.com"}

## Как проверить, что все получилось?

Чтобы проверить успешность настройки исключения получателей и отправителей, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List Bypassed*

2.  Убедитесь, что отображаемые значения соответствуют заданным параметрам.

## Использование командной консоли для настройки разрешенных и блокированных фраз

Чтобы добавить разрешенные и заблокированные слова и фразы, выполните следующую команду:

    Add-ContentFilterPhrase -Influence GoodWord -Phrase <Phrase> -Influence BadWord -Phrase <Phrase>

Этот пример разрешает все сообщения, которые содержат фразу "отзыв клиента".

    Add-ContentFilterPhrase -Influence GoodWord -Phrase "customer feedback"

В этом примере блокирует все сообщения, которые содержат фразу "подсказка по акциям".

    Add-ContentFilterPhrase -Influence BadWord -Phrase "stock tip"

Чтобы удалить разрешенные или заблокированные фразы, выполните следующую команду:

    Remove-ContentFilterPhrase -Phrase <Phrase>

В этом примере удаляется фраза "подсказка по акциям":

    Remove-ContentFilterPhrase -Phrase "stock tip"

## Как проверить, что все получилось?

Чтобы проверить успешность настройки разрешенных или заблокированных фраз, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterPhrase | Format-List Influence,Phrase

2.  Убедитесь, что отображаемые значения соответствуют заданным параметрам.

## Использование командной консоли для настройки порогов вероятности нежелательной почты

Чтобы настроить пороговые значения и действия вероятности нежелательной почты, выполните приведенную ниже команду.

    Set-ContentFilterConfig -SCLDeleteEnabled <$true | $false> -SCLDeleteThreshold <Value> -SCLRejectEnabled <$true | $false> -SCLRejectThreshold <Value> -SCLQuarantineEnabled <$true | $false> -SCLQuarantineThreshold <Value>

> [!NOTE]  
> Действие &quot;Удалить&quot; имеет более высокий приоритет по сравнению с действием &quot;Отклонить&quot;, а действие &quot;Отклонить&quot; — более высокий приоритет по сравнению с действием &quot;Поместить на карантин&quot;. Таким образом, пороговое значение вероятности нежелательной почты для действия &quot;Удалить&quot; должно превышать пороговое значение вероятности нежелательной почты действия &quot;Отклонить&quot;, которое, в свою очередь, должно превышать пороговое значение вероятности нежелательной почты действия &quot;Поместить на карантин&quot;. Только действие &quot;Отклонить&quot; включено по умолчанию, его пороговое значение SCL по умолчанию равно 7.


В этом примере настраиваются следующие пороговые значения вероятности нежелательной почты:

  - Действие "Удалить" включено, задано соответствующее пороговое значение SCL 9.

  - Действие "Отклонить" включено, задано соответствующее пороговое значение SCL 8.

  - Действие "Поместить на карантин" включено, задано соответствующее пороговое значение SCL 7.

<!-- end list -->

    Set-ContentFilterConfig -SCLDeleteEnabled $true -SCLDeleteThreshold 9 -SCLRejectEnabled $true -SCLRejectThreshold 8 -SCLQuarantineEnabled $true -SCLQuarantineThreshold 7

## Как проверить, что все получилось?

Чтобы убедиться, что вы успешно настроили пороговые значения SCL, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List SCL*

2.  Убедитесь, что отображаемые значения соответствуют заданным параметрам.

## Использование командной консоли для настройки ответа об отклонении

Если действие "Отклонить" включено, вы можете настроить ответ при отклонении, который передается отправителю сообщения. Ответ не должен превышать 240 символов.

Чтобы задать пользовательский ответ при отклонении, выполните следующую команду:

    Set-ContentFilterConfig -RejectionResponse "<Custom Text>"

В этом примере для агента фильтрации контента настраивается отправка настроенного ответа об отклонении.

    Set-ContentFilterConfig -RejectionResponse "Your message was rejected because it appears to be SPAM."

## Как проверить, что все получилось?

Чтобы убедиться, что вы успешно настроили ответ при отклонении, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List *Reject*

2.  Убедитесь, что отображаемые значения соответствуют заданным параметрам.

## Использование командной консоли для включения или отключения добавления штемпелей Outlook

Проверка *почтового штемпеля Outlook* представляет собой вычислительное подтверждение использования Microsoft Outlook при отправке исходящих сообщений, что позволяет системам обработки сообщений у получателей отличить допустимую почту от нежелательной. Почтовый штемпель доступен в Outlook 2007 и более новых версиях. Почтовый штемпель помогает уменьшить число ложных срабатываний. Почтовый штемпель Outlook по умолчанию включен.

Чтобы отключить проверку почтового штемпеля Outlook, выполните следующую команду:

    Set-ContentFilterConfig -OutlookEmailPostmarkValidationEnabled $false

Чтобы включить проверку почтового штемпеля Outlook, выполните следующую команду:

    Set-ContentFilterConfig -OutlookEmailPostmarkValidationEnabled $true

## Как проверить, что все получилось?

Чтобы проверить успешность включения или выключения почтового штемпеля Outlook, выполните следующие действия.

1.  Выполните следующую команду:
    
        Get-ContentFilterConfig | Format-List OutlookEmailPostmarkValidationEnabled

2.  Сравните показанное значение с заданным вами значением.

