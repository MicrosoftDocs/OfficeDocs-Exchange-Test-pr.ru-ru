---
title: 'Восстановление обратимо удаленного почтового ящика: Exchange 2013 Help'
TOCTitle: Восстановление обратимо удаленного почтового ящика
ms:assetid: 4f3f5ce4-9d12-4ed8-9f70-d8a6aa8a1b2e
ms:mtpsurl: https://technet.microsoft.com/ru-ru/library/JJ863435(v=EXCHG.150)
ms:contentKeyID: 50556418
ms.date: 04/30/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Восстановление обратимо удаленного почтового ящика

 

_**Применимо к:** Exchange Online, Exchange Server 2013_

_**Последнее изменение раздела:** 2012-11-29_

Для подключения обратимо удаленного почтового ящика к учетной записи пользователя Active Directory используется командная консоль. Почтовый ящик *обратимо удаляется* в исходной базе данных почтовых ящиков в случае его перемещения в другую базу данных почтовых ящиков. После перемещения почтовый ящик не полностью удаляется из исходной базы данных почтовых ящиков в Exchange. Вместо этого почтовый ящик в исходной базе данных почтовых ящиков переходит в состояние обратимого удаления. Это позволяет восстановить исходный почтовый ящик, если во время перемещения возникают ошибки, которые приводят к сбою или повреждению почтового ящика в целевой базе данных. В таком случае можно восстановить исходный почтовый ящик и повторить попытку перемещения.

Удаленный таким образом почтовый ящик сохраняется в исходной базе данных до тех пор, пока не истечет период хранения удаленных почтовых ящиков или не будет использован командлет **Remove-StoreMailbox**, очищающий обратимо удаленный почтовый ящик. Пока обратимо удаленный почтовый ящик не будет окончательно удален из базы данных почтовых ящиков Exchange, с помощью командной консоли можно восстановить его содержимое в существующем или архивном почтовом ящике.

Дополнительные сведения об обратимо удаленных почтовых ящиках и других связанных задачах управления см. в следующих разделах.

  - [Отключенные почтовые ящики](disconnected-mailboxes-exchange-2013-help.md)

  - [Подключение или восстановление удаленного почтового ящика](connect-or-restore-a-deleted-mailbox-exchange-2013-help.md)

  - [Управление запросами на восстановление почтового ящика](manage-mailbox-restore-requests-exchange-2013-help.md)

  - [Окончательное удаление почтового ящика](permanently-delete-a-mailbox-exchange-2013-help.md)

## Что нужно знать перед началом работы?

  - Предполагаемое время для завершения: 2 минуты.

  - Для выполнения этих процедур необходимы соответствующие разрешения. Сведения о необходимых разрешениях см. в статье Запись "Разрешения на подготовку получателей" в разделе [Разрешения получателей](recipients-permissions-exchange-2013-help.md).

  - Процедуры, описанные в этом разделе, можно выполнить только в командной консоли Exchange. Центр администрирования Exchange нельзя использовать для восстановления обратимо удаленного почтового ящика.

  - Выполните следующую команду, чтобы убедиться, что обратимо удаленный почтовый ящик, который необходимо подключить к учетной записи пользователя, все еще находится в базе данных почтовых ящиков и не отключен.
    
        Get-MailboxDatabase | Get-MailboxStatistics | Where { $_.DisplayName -eq "<display name>" } | fl DisplayName,DisconnectReason,DisconnectDate
    
    Обратимо удаленный почтовый ящик должен находиться в базе данных почтовых ящиков, а для свойства *DisconnectReason* необходимо установить значение `SoftDeleted`. Если почтовый ящик очищен из базы данных, команда будет выполнена безрезультатно.
    
    Также можно выполнить следующую команду, чтобы отобразить все обратимо удаленные почтовые ящики в организации.
    
        Get-MailboxDatabase | Get-MailboxStatistics | Where { $_.DisconnectReason -eq "SoftDeleted" } | fl DisplayName,DisconnectReason,DisconnectDate

  - Сочетания клавиш для процедур, описанных в этой статье, приведены в статье [Сочетания клавиш в Центре администрирования Exchange](keyboard-shortcuts-in-the-exchange-admin-center-exchange-online-protection-help.md).

  - Возникли проблемы? Обратитесь за помощью к участникам форумов, посвященных Exchange. Посетите форумы по таким продуктам: [Exchange Server](https://go.microsoft.com/fwlink/p/?linkid=60612), [Exchange Online](https://go.microsoft.com/fwlink/p/?linkid=267542) или [Exchange Online Protection](https://go.microsoft.com/fwlink/p/?linkid=285351)..

## Использование командной консоли для восстановления обратимо удаленного почтового ящика

Можно использовать командную консоль для восстановления обратимо удаленного почтового ящика в существующем почтовом ящике с помощью командлета **New-MailboxRestoreRequest**. При восстановлении обратимо удаленного почтового ящика его содержимое копируется в существующий почтовый ящик, который называется *целевым*. После успешного выполнения запроса на восстановление почтового ящика запрос по умолчанию сохраняется в течение 30-ти дней, а затем удаляется. Его можно удалить раньше с помощью командлета **Remove-MailboxRestoreRequest**.

После восстановления обратимо удаленного почтового ящика он хранится в базе данных почтовых ящиков до тех пор, пока администратор не выполнит его окончательное удаление или не истечет срок хранения удаленных почтовых ящиков.

Чтобы создать запрос на восстановление почтового ящика, необходимо использовать отображаемое имя, GUID почтового ящика или прежнее различающееся имя обратимо удаленного почтового ящика. Используйте командлет **Get-MailboxStatistics**, чтобы отобразить значения свойств **DisplayName**, **MailboxGuid** и **LegacyDN** обратимо удаленного почтового ящика, который необходимо восстановить. Например, выполните следующую команду, чтобы вернуть эти сведения для всех отключенных и обратимо удаленных почтовых ящиков в организации.

    Get-MailboxDatabase | Get-MailboxStatistics | Where {$_.DisconnectReason -eq "SoftDeleted"} | fl DisplayName,MailboxGuid,LegacyDN,Database

В этом примере выполняется восстановление обратимо удаленного почтового ящика, который идентифицируется с помощью отображаемого имени в параметре *SourceStoreMailbox* и находится в базе данных почтовых ящиков MBXDB01, в целевом почтовом ящике Debra Garcia. Параметр *AllowLegacyDNMismatch* используется, чтобы обеспечить возможность восстановления исходного почтового ящика в почтовом ящике со значением прежнего различающегося имени, отличным от обратимо удаленного почтового ящика.

    New-MailboxRestoreRequest -SourceStoreMailbox "Debra Garcia" -SourceDatabase MBXDB01 -TargetMailbox "Debra Garcia" -AllowLegacyDNMismatch

В этом примере выполняется восстановление обратимо удаленного архивного почтового ящика пользователя Pilar Pinilla, который идентифицируется с помощью GUID почтового ящика, в текущем архивном почтовом ящике данного пользователя. Параметр *AllowLegacyDNMismatch* указывать необязательно, поскольку первичный почтовый ящик и его соответствующий архивный почтовый ящик имеют одинаковое прежнее различающееся имя.

    New-MailboxRestoreRequest -SourceStoreMailbox dc35895a-a628-4bba-9aa9-650f5cdb9ae7 -SourceDatabase MBXDB02 -TargetMailbox pilarp@contoso.com -TargetIsArchive

Дополнительные сведения о синтаксисе и параметрах см. в разделе [New-MailboxRestoreRequest](https://technet.microsoft.com/ru-ru/library/ff829875\(v=exchg.150\)).

## Как проверить, что все получилось?

Чтобы убедиться, что обратимо удаленный почтовый ящик успешно восстановлен в целевом почтовом ящике, выполните командлет **Get-MailboxRestoreRequest** или **Get-MailboxRestoreRequestStatistics** для отображения сведений о запросе на восстановление. Если запрос на восстановление успешно создан, свойство *Status* будет иметь значение **Queued**, **InProgress** или **Completed**. После выполнения запроса на восстановление содержимое обратимо удаленного почтового ящика появится в целевом почтовом ящике.

Дополнительные сведения см. в следующих разделах:

  - [Управление запросами на восстановление почтового ящика](manage-mailbox-restore-requests-exchange-2013-help.md)

  - [Get-MailboxRestoreRequest](https://technet.microsoft.com/ru-ru/library/ff829907\(v=exchg.150\))

  - [Get-MailboxRestoreRequestStatistics](https://technet.microsoft.com/ru-ru/library/ff829912\(v=exchg.150\))

